<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Trade Network Visualization</title>
    <script src="https://unpkg.com/3d-force-graph"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background: white;
            overflow: hidden;
        }
        
        .container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }
        
        .controls-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.85);
            padding: 20px;
            border-radius: 10px;
            color: white;
            z-index: 1000;
            max-width: 300px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .control-group {
            margin-bottom: 15px;
        }
        
        .control-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            font-size: 14px;
        }
        
        select, input[type="range"] {
            width: 100%;
            padding: 8px;
            border: none;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.9);
            font-size: 12px;
        }
        
        input[type="range"] {
            background: rgba(255, 255, 255, 0.3);
        }
        
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
            margin: 5px 5px 5px 0;
            transition: background 0.3s;
        }
        
        button:hover {
            background: #45a049;
        }
        
        .info-panel {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.85);
            padding: 15px;
            border-radius: 10px;
            color: white;
            z-index: 1000;
            max-width: 250px;
            backdrop-filter: blur(10px);
            font-size: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .stats-panel {
            position: absolute;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.85);
            padding: 15px;
            border-radius: 10px;
            color: white;
            z-index: 1000;
            backdrop-filter: blur(10px);
            font-size: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .value-display {
            color: #4CAF50;
            font-weight: bold;
        }
        
        .toggle-button {
            background: #2196F3;
        }
        
        .toggle-button:hover {
            background: #1976D2;
        }
        
        .reset-button {
            background: #ff5722;
        }
        
        .reset-button:hover {
            background: #d84315;
        }
        
        .node-info {
            position: absolute;
            bottom: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            padding: 15px;
            border-radius: 10px;
            color: white;
            z-index: 1000;
            backdrop-filter: blur(10px);
            font-size: 14px;
            min-width: 200px;
            display: none;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <div id="3d-graph"></div>
        
        <div class="controls-panel">
            <h3 style="margin-top: 0; color: #4CAF50;">üåê 3D Trade Network</h3>
            
            <div class="control-group">
                <label for="scenarioSelect">Scenario:</label>
                <select id="scenarioSelect">
                    <option value="baseline">Baseline</option>
                    <option value="counterfactual">Counterfactual</option>
                    <option value="comparison">Comparison (Change)</option>
                </select>
            </div>
            
            <div class="control-group">
                <label for="nodeSize">Node Size: <span id="nodeSizeValue" class="value-display">25.0</span></label>
                <input type="range" id="nodeSize" min="10" max="50" step="1" value="25">
            </div>
            
            <div class="control-group">
                <button id="pauseBtn" class="toggle-button">‚è∏Ô∏è Pause</button>
                <button id="resetBtn" class="reset-button">üîÑ Reset</button>
            </div>
            
            <div class="control-group">
                <button id="autoRotateBtn" class="toggle-button">üîÑ Auto Rotate</button>
                <button id="centerBtn">üéØ Center View</button>
            </div>
        </div>
        
        <div class="info-panel">
            <h4 style="margin-top: 0;">üìã Controls</h4>
            <p><strong>üñ±Ô∏è Mouse:</strong></p>
            <p>‚Ä¢ Drag to orbit</p>
            <p>‚Ä¢ Scroll to zoom</p>
            <p>‚Ä¢ Click node for info</p>
            <p><strong>‚å®Ô∏è Keyboard:</strong></p>
            <p>‚Ä¢ WASD to move</p>
            <p>‚Ä¢ Space to stop</p>
        </div>
        
        <div class="stats-panel">
            <h4 style="margin-top: 0;">üìä Statistics</h4>
            <p>Nodes: <span id="countryCount" class="value-display">0</span></p>
            <p>Total Expenditure: <span id="totalExpenditure" class="value-display">$0</span></p>
            <p>Selected: <span id="selectedNode" class="value-display">None</span></p>
        </div>
        
        <div class="node-info" id="nodeInfo">
            <h4 style="margin-top: 0;">üè∑Ô∏è Node Details</h4>
            <div id="nodeDetails"></div>
        </div>
    </div>

    <script>
        // ============================================================================
        // üéõÔ∏è MAIN VISUALIZATION PARAMETERS - ADJUST THESE FOR SIZE & SPACING
        // ============================================================================
        const VISUALIZATION_CONFIG = {
            // Country Ball Size (smaller number = BIGGER balls)
            COUNTRY_SIZE_DIVISOR: 500,        // Try: 200, 300, 800, 1000 for different sizes
            
            // Spacing Between Countries (smaller number = CLOSER together)  
            COUNTRY_SEPARATION_DISTANCE: 30,   // Try: 15, 20, 40, 50 for different spacing
            
            // Overall Force (more negative = MORE spread out)
            OVERALL_REPULSION_FORCE: -100,     // Try: -50, -150, -200 for different spread
            
            // Sector Packing Within Countries (usually keep as-is)
            SECTOR_PACK_DISTANCE: 8,           // How tight sectors cluster within each country
            SECTOR_SIZE_DIVISOR: 30000         // Sector node size (usually keep as-is)
        };
        
        // Basic display configuration
        const config = {
            width: window.innerWidth,
            height: window.innerHeight,
            backgroundColor: 'rgba(0,0,0,0)',
            showNavInfo: false
        };

        // Real trade data from economic model - BASELINE ONLY
        let graphData = {
            baseline: {
                nodes: [
                    { id: 'AUS', name: 'Australia', expenditure: 2771876224.3515906, continent: 'Oceania', sectors: {"Agriculture": 51027511.497598596, "Mining and Quarrying": 60304551.52358586, "Food": 98153910.28819232, "Textiles": 26573923.508161962, "Wood and Paper": 51178063.887439474, "Petroleum": 124574552.0675371, "Metal Products": 104653402.7970488, "Electrica and Machinery": 49778419.16564116, "Transport Equipment": 52059859.73524482, "Other Manufacturing and Recycling": 14953682.887666767, "Electricity, Gas and Water": 41710333.75555251, "Construction": 225655576.69227916, "Maintenance and Repair": 4357024.365157322, "Wholesale": 124379832.60884704, "Retail": 79668290.70899504, "Hotels and Restaurants": 88047449.03334631, "Transport": 169205548.37507868, "Post and Telecommunications": 74129966.0943371, "Finance and Business": 836489221.0091444, "Public Administration": 123512627.58588524, "Education, Health and Other Services": 363777942.50662184, "Private Households": 2606798.0150774233, "Others": 5077736.243152326} },
                    { id: 'AUT', name: 'Austria', expenditure: 907929400.6853844, continent: 'Europe', sectors: {"Agriculture": 19367550.663799215, "Mining and Quarrying": 8739449.72713331, "Food": 37977158.111019, "Textiles": 24776090.684018105, "Wood and Paper": 34285816.019137174, "Petroleum": 51599600.15315973, "Metal Products": 34458898.43884236, "Electrica and Machinery": 78621841.1884807, "Transport Equipment": 37430950.21536192, "Other Manufacturing and Recycling": 14547198.88640713, "Electricity, Gas and Water": 23238841.11478965, "Construction": 55288517.92246865, "Maintenance and Repair": 12863316.973484349, "Wholesale": 45292260.784491904, "Retail": 30450479.47226823, "Hotels and Restaurants": 33111076.169355474, "Transport": 49874895.70608223, "Post and Telecommunications": 19154946.19669502, "Finance and Business": 176212191.48169255, "Public Administration": 31955463.798428476, "Education, Health and Other Services": 85115270.26938957, "Private Households": 681491.8129123227, "Others": 2886094.89596727} },
                    { id: 'BEL', name: 'Belgium', expenditure: 1314648581.3507335, continent: 'Europe', sectors: {"Agriculture": 26872900.953075018, "Mining and Quarrying": 14586315.638419146, "Food": 116060967.61627907, "Textiles": 43607673.99418159, "Wood and Paper": 27163908.69919662, "Petroleum": 109242570.314892, "Metal Products": 44957375.264216654, "Electrica and Machinery": 87010508.48097283, "Transport Equipment": 57257222.29790299, "Other Manufacturing and Recycling": 19106142.092719615, "Electricity, Gas and Water": 23265183.699247915, "Construction": 81187580.72742096, "Maintenance and Repair": 19153135.99072784, "Wholesale": 82352190.55922025, "Retail": 20042675.65581757, "Hotels and Restaurants": 25339542.875844534, "Transport": 82770498.72516784, "Post and Telecommunications": 24965979.495516922, "Finance and Business": 243635792.0251058, "Public Administration": 43983857.411663316, "Education, Health and Other Services": 117261479.94726163, "Private Households": 1598694.4994834878, "Others": 3226384.386400046} },
                    { id: 'BRA', name: 'Brazil', expenditure: 5049655103.920153, continent: 'South America', sectors: {"Agriculture": 209587719.70198268, "Mining and Quarrying": 116886909.34800011, "Food": 361520437.33384347, "Textiles": 213344309.4576684, "Wood and Paper": 90803773.7119171, "Petroleum": 823337367.8211211, "Metal Products": 195512560.8396116, "Electrica and Machinery": 750330795.3493667, "Transport Equipment": 336939324.1292634, "Other Manufacturing and Recycling": 74789928.556851, "Electricity, Gas and Water": 93798024.42129883, "Construction": 148541716.0484672, "Maintenance and Repair": 3974925.8329594787, "Wholesale": 51165871.33639299, "Retail": 113415415.41507067, "Hotels and Restaurants": 129691990.44488266, "Transport": 125533472.44607407, "Post and Telecommunications": 118508628.30368, "Finance and Business": 499345616.8314731, "Public Administration": 203857389.54007936, "Education, Health and Other Services": 329262364.71691453, "Private Households": 22045690.247463632, "Others": 37460872.085771546} },
                    { id: 'BGR', name: 'BGR', expenditure: 158924941.92839125, continent: 'Other', sectors: {"Agriculture": 5793870.9723975295, "Mining and Quarrying": 3807058.086992756, "Food": 10072991.578859657, "Textiles": 4339748.96029333, "Wood and Paper": 4029115.3491693866, "Petroleum": 14283828.853867773, "Metal Products": 4961355.325924685, "Electrica and Machinery": 13047366.336288381, "Transport Equipment": 4197829.378944665, "Other Manufacturing and Recycling": 2499891.7616596343, "Electricity, Gas and Water": 9675665.190255601, "Construction": 8732280.087453935, "Maintenance and Repair": 206651.3998555918, "Wholesale": 7783881.0224554865, "Retail": 3862495.35438641, "Hotels and Restaurants": 5835571.933441676, "Transport": 14314857.287549425, "Post and Telecommunications": 6253738.4730197275, "Finance and Business": 20131051.29562862, "Public Administration": 6026864.483146742, "Education, Health and Other Services": 8521079.148295006, "Private Households": 80671.80902189734, "Others": 467077.8394833352} },
                    { id: 'CAN', name: 'Canada', expenditure: 3562173757.7008324, continent: 'North America', sectors: {"Agriculture": 92012549.42920996, "Mining and Quarrying": 91966695.51528457, "Food": 191361305.891222, "Textiles": 136324802.98046938, "Wood and Paper": 115260475.23295565, "Petroleum": 186991787.4540902, "Metal Products": 109276201.56900465, "Electrica and Machinery": 176807494.6402821, "Transport Equipment": 150175925.7276777, "Other Manufacturing and Recycling": 79257201.93132782, "Electricity, Gas and Water": 38233359.09550331, "Construction": 240939356.36382014, "Maintenance and Repair": 6900342.331167451, "Wholesale": 94884859.40244544, "Retail": 193781882.03149146, "Hotels and Restaurants": 108629659.38591558, "Transport": 320177037.436978, "Post and Telecommunications": 60647316.53759898, "Finance and Business": 682162819.5050797, "Public Administration": 227278896.89609432, "Education, Health and Other Services": 255901893.45547354, "Private Households": 59052.88408859288, "Others": 3142842.003652259} },
                    { id: 'CHN', name: 'China', expenditure: 41828412457.190315, continent: 'Asia', sectors: {"Agriculture": 2286591180.52991, "Mining and Quarrying": 1153693167.9167812, "Food": 2932592650.791787, "Textiles": 1990663658.9216428, "Wood and Paper": 903371747.238224, "Petroleum": 5801856977.570383, "Metal Products": 4097200101.224455, "Electrica and Machinery": 9135730807.638845, "Transport Equipment": 1782995007.0678244, "Other Manufacturing and Recycling": 606634510.1326144, "Electricity, Gas and Water": 986576651.691181, "Construction": 2637951180.560362, "Maintenance and Repair": 27780186.239498563, "Wholesale": 357098458.1135285, "Retail": 794228443.9970663, "Hotels and Restaurants": 548274853.8630506, "Transport": 1092633136.4437165, "Post and Telecommunications": 327043488.35158104, "Finance and Business": 2117247588.7311137, "Public Administration": 82016472.6502093, "Education, Health and Other Services": 1428539866.5267162, "Private Households": 7188051.801348131, "Others": 730504269.1884787} },
                    { id: 'CZE', name: 'Czech Republic', expenditure: 561544966.2128004, continent: 'Europe', sectors: {"Agriculture": 18881749.44862977, "Mining and Quarrying": 12273842.23438419, "Food": 42821179.69884924, "Textiles": 20504250.328669026, "Wood and Paper": 15817580.893668676, "Petroleum": 56638570.15441004, "Metal Products": 34413039.247668765, "Electrica and Machinery": 62151313.47573857, "Transport Equipment": 23133707.864042476, "Other Manufacturing and Recycling": 8282016.04034191, "Electricity, Gas and Water": 24360790.88092906, "Construction": 39299218.19690558, "Maintenance and Repair": 8080635.91931718, "Wholesale": 19348742.187683422, "Retail": 8313214.845704144, "Hotels and Restaurants": 9180593.989122208, "Transport": 31611527.54934632, "Post and Telecommunications": 8670398.610394804, "Finance and Business": 77533107.02670924, "Public Administration": 11182934.45736555, "Education, Health and Other Services": 27488083.429624368, "Private Households": 43041.550851682216, "Others": 1515428.1824440532} },
                    { id: 'DNK', name: 'Denmark', expenditure: 711204827.5028387, continent: 'Europe', sectors: {"Agriculture": 15360018.801791193, "Mining and Quarrying": 6185896.147115936, "Food": 56073903.79257028, "Textiles": 18333084.637424383, "Wood and Paper": 20481923.044180084, "Petroleum": 37033295.45670085, "Metal Products": 21991208.342635274, "Electrica and Machinery": 46003949.949821, "Transport Equipment": 13654054.650026277, "Other Manufacturing and Recycling": 9674587.63973905, "Electricity, Gas and Water": 10468746.303374361, "Construction": 48350346.60089276, "Maintenance and Repair": 6000936.61924789, "Wholesale": 44414157.221953936, "Retail": 12741582.08595632, "Hotels and Restaurants": 11471497.453698182, "Transport": 54213764.71622833, "Post and Telecommunications": 27555186.863925282, "Finance and Business": 136952596.54088706, "Public Administration": 50152060.80596625, "Education, Health and Other Services": 62526353.71739977, "Private Households": 332980.30451799114, "Others": 1232695.8067863923} },
                    { id: 'EST', name: 'EST', expenditure: 71673429.60493135, continent: 'Other', sectors: {"Agriculture": 2952059.668152698, "Mining and Quarrying": 711651.8261943128, "Food": 6709163.127848454, "Textiles": 4081380.7143962802, "Wood and Paper": 2110977.5057102274, "Petroleum": 5610080.974307476, "Metal Products": 2206630.623721325, "Electrica and Machinery": 7615708.028580433, "Transport Equipment": 2094772.7753874096, "Other Manufacturing and Recycling": 917881.34889006, "Electricity, Gas and Water": 2288401.9027044163, "Construction": 3746313.783631415, "Maintenance and Repair": 884994.5591064172, "Wholesale": 2960170.6799483593, "Retail": 1993450.1328202868, "Hotels and Restaurants": 984879.7829697644, "Transport": 7494471.653847161, "Post and Telecommunications": 1598720.5440357008, "Finance and Business": 8255561.624461146, "Public Administration": 2182814.107513, "Education, Health and Other Services": 4099661.4979628236, "Private Households": 14313.07270416295, "Others": 159369.6700380296} },
                    { id: 'FIN', name: 'Finland', expenditure: 577001475.8119674, continent: 'Europe', sectors: {"Agriculture": 20816019.91449459, "Mining and Quarrying": 11798023.453374209, "Food": 29068381.601986196, "Textiles": 18389886.07517466, "Wood and Paper": 29080095.16597544, "Petroleum": 35849800.879227206, "Metal Products": 21298763.48660927, "Electrica and Machinery": 67364669.74613559, "Transport Equipment": 13348775.02591321, "Other Manufacturing and Recycling": 5682064.729990816, "Electricity, Gas and Water": 10425489.047274435, "Construction": 37570331.369647466, "Maintenance and Repair": 6163637.70365328, "Wholesale": 28031086.87591094, "Retail": 11426930.770500217, "Hotels and Restaurants": 9526949.47839161, "Transport": 35358499.37955726, "Post and Telecommunications": 11532162.217097405, "Finance and Business": 92455261.26557186, "Public Administration": 20527243.196091514, "Education, Health and Other Services": 59881993.883844756, "Private Households": 111880.71262574758, "Others": 1293529.8329196984} },
                    { id: 'FRA', name: 'France', expenditure: 5637031965.936885, continent: 'Europe', sectors: {"Agriculture": 149671246.45575657, "Mining and Quarrying": 78347705.01658815, "Food": 389759768.2272504, "Textiles": 158672488.75642243, "Wood and Paper": 120284323.10470133, "Petroleum": 412301177.10575163, "Metal Products": 195516944.35177824, "Electrica and Machinery": 369923282.5082588, "Transport Equipment": 246426528.0684198, "Other Manufacturing and Recycling": 54878643.4804963, "Electricity, Gas and Water": 110738930.13823049, "Construction": 314467940.51672924, "Maintenance and Repair": 59442669.72074534, "Wholesale": 236482154.71385646, "Retail": 157695166.32354254, "Hotels and Restaurants": 118890332.76165417, "Transport": 308219302.6830805, "Post and Telecommunications": 104535715.58103977, "Finance and Business": 1260925808.4039469, "Public Administration": 226909262.09122306, "Education, Health and Other Services": 535343425.40061593, "Private Households": 11265639.791376917, "Others": 16333510.735420441} },
                    { id: 'DEU', name: 'Germany', expenditure: 7966578522.181781, continent: 'Europe', sectors: {"Agriculture": 153210987.776867, "Mining and Quarrying": 61708148.44873635, "Food": 421123022.01007473, "Textiles": 229085150.7644959, "Wood and Paper": 168823135.92431542, "Petroleum": 600694477.8563428, "Metal Products": 465797134.4992565, "Electrica and Machinery": 609872952.8865784, "Transport Equipment": 534053620.2530163, "Other Manufacturing and Recycling": 99603219.93272722, "Electricity, Gas and Water": 176705487.67737263, "Construction": 369407790.31948483, "Maintenance and Repair": 9370422.75621153, "Wholesale": 270553939.3103013, "Retail": 173579739.65484738, "Hotels and Restaurants": 122616603.17608804, "Transport": 499108503.12758917, "Post and Telecommunications": 164922349.26020613, "Finance and Business": 1574726536.561927, "Public Administration": 299271954.46307766, "Education, Health and Other Services": 950101873.657845, "Private Households": 97449.21284884278, "Others": 12144022.651572073} },
                    { id: 'GRC', name: 'GRC', expenditure: 405222695.3539624, continent: 'Other', sectors: {"Agriculture": 20844676.381211415, "Mining and Quarrying": 12556445.934676, "Food": 31472070.00752826, "Textiles": 11752326.647282518, "Wood and Paper": 6334104.131581054, "Petroleum": 27403973.25334567, "Metal Products": 10073164.517115157, "Electrica and Machinery": 13760666.665731661, "Transport Equipment": 6945157.149482513, "Other Manufacturing and Recycling": 2977816.8965082737, "Electricity, Gas and Water": 8217790.445558278, "Construction": 27361377.94178722, "Maintenance and Repair": 6289387.621162172, "Wholesale": 18360712.735396776, "Retail": 14557282.709363759, "Hotels and Restaurants": 20982265.589308385, "Transport": 31187121.111157622, "Post and Telecommunications": 8667491.092920214, "Finance and Business": 64371323.470805764, "Public Administration": 24603585.819157626, "Education, Health and Other Services": 32715688.144773226, "Private Households": 886638.6051288899, "Others": 2901628.4829800385} },
                    { id: 'HUN', name: 'HUN', expenditure: 366573291.4686163, continent: 'Other', sectors: {"Agriculture": 15377603.679923436, "Mining and Quarrying": 4238316.350361443, "Food": 21187617.010606617, "Textiles": 15601381.40753184, "Wood and Paper": 9777427.475212706, "Petroleum": 35708103.40470805, "Metal Products": 14846027.170673104, "Electrica and Machinery": 66858975.11272468, "Transport Equipment": 18195576.39369776, "Other Manufacturing and Recycling": 4793594.726404725, "Electricity, Gas and Water": 10512274.772024073, "Construction": 12981752.697508726, "Maintenance and Repair": 4240589.522158522, "Wholesale": 10865008.300834248, "Retail": 10136568.182280703, "Hotels and Restaurants": 5555191.959968031, "Transport": 16035764.532026507, "Post and Telecommunications": 6876158.061622744, "Finance and Business": 44606236.46835337, "Public Administration": 12238578.632599074, "Education, Health and Other Services": 23957199.948121607, "Private Households": 17598.45482297305, "Others": 1965747.204451391} },
                    { id: 'IND', name: 'India', expenditure: 7981688023.418776, continent: 'Asia', sectors: {"Agriculture": 1096199013.5449712, "Mining and Quarrying": 194173715.7821887, "Food": 371942947.6477093, "Textiles": 162061679.91875646, "Wood and Paper": 211578340.12740996, "Petroleum": 1389967392.3254364, "Metal Products": 1044533917.6616067, "Electrica and Machinery": 671554917.8706605, "Transport Equipment": 139905004.29298916, "Other Manufacturing and Recycling": 366073202.1389267, "Electricity, Gas and Water": 139919269.65038234, "Construction": 380347502.5628395, "Maintenance and Repair": 9226571.434085522, "Wholesale": 116841146.4839297, "Retail": 259626609.4159787, "Hotels and Restaurants": 102101953.23982821, "Transport": 478643584.2693628, "Post and Telecommunications": 52242657.67462801, "Finance and Business": 461093987.7489915, "Public Administration": 118647716.77317967, "Education, Health and Other Services": 129836727.75598294, "Private Households": 632311.7243591942, "Others": 84537853.37457049} },
                    { id: 'IRL', name: 'IRL', expenditure: 716532372.4988772, continent: 'Other', sectors: {"Agriculture": 18952010.558562156, "Mining and Quarrying": 2331210.4968027687, "Food": 32330461.38312108, "Textiles": 14188698.034820318, "Wood and Paper": 28307553.627488818, "Petroleum": 36044054.80450027, "Metal Products": 11919764.692614341, "Electrica and Machinery": 107767796.32135172, "Transport Equipment": 56668548.945511274, "Other Manufacturing and Recycling": 10927631.218775427, "Electricity, Gas and Water": 7329363.522737483, "Construction": 50098095.33588977, "Maintenance and Repair": 5020957.100111777, "Wholesale": 66823506.36134455, "Retail": 15997713.018679313, "Hotels and Restaurants": 16066954.43008827, "Transport": 22666109.020814255, "Post and Telecommunications": 15493284.986602481, "Finance and Business": 138611424.98742265, "Public Administration": 18730420.629105095, "Education, Health and Other Services": 38502680.96954127, "Private Households": 73519.18951805975, "Others": 1680612.863473875} },
                    { id: 'ITA', name: 'Italy', expenditure: 4019991162.1045775, continent: 'Europe', sectors: {"Agriculture": 105145115.6375446, "Mining and Quarrying": 46601719.872057885, "Food": 300510298.44647884, "Textiles": 228438368.73871806, "Wood and Paper": 98298585.20272537, "Petroleum": 264155010.49729174, "Metal Products": 167867252.7736579, "Electrica and Machinery": 220064534.31449407, "Transport Equipment": 124940049.58234727, "Other Manufacturing and Recycling": 57268022.61246827, "Electricity, Gas and Water": 84246704.83128807, "Construction": 186768474.9487276, "Maintenance and Repair": 71010341.73874807, "Wholesale": 200362073.29741168, "Retail": 169208159.0843185, "Hotels and Restaurants": 139675893.47374436, "Transport": 265078183.32659099, "Post and Telecommunications": 66776552.41835812, "Finance and Business": 712681725.364491, "Public Administration": 140165992.8641522, "Education, Health and Other Services": 343973668.6218729, "Private Households": 9354316.333252793, "Others": 17400118.123837214} },
                    { id: 'JPN', name: 'Japan', expenditure: 10440782286.641598, continent: 'Asia', sectors: {"Agriculture": 257109180.77015296, "Mining and Quarrying": 158811572.34275305, "Food": 984400371.9002926, "Textiles": 418524265.9145352, "Wood and Paper": 210012658.24601534, "Petroleum": 724163440.6269729, "Metal Products": 457151941.40191436, "Electrica and Machinery": 668445262.7336798, "Transport Equipment": 286695982.8746565, "Other Manufacturing and Recycling": 116238082.97060767, "Electricity, Gas and Water": 259780941.5032493, "Construction": 550093747.6980889, "Maintenance and Repair": 16446722.292464897, "Wholesale": 509023218.2246548, "Retail": 281551906.73302233, "Hotels and Restaurants": 222160482.20346975, "Transport": 562110854.6013114, "Post and Telecommunications": 304590933.6931362, "Finance and Business": 1833047796.54429, "Public Administration": 306586513.81632006, "Education, Health and Other Services": 1246632610.4634912, "Private Households": 1555066.7244375348, "Others": 65648732.36207897} },
                    { id: 'LTU', name: 'LTU', expenditure: 113634978.60273102, continent: 'Other', sectors: {"Agriculture": 5693145.0107089225, "Mining and Quarrying": 4803137.690924698, "Food": 17511446.203095023, "Textiles": 7002934.145367872, "Wood and Paper": 3371110.9841017695, "Petroleum": 8446291.730879417, "Metal Products": 1810653.4451192683, "Electrica and Machinery": 5742434.947029803, "Transport Equipment": 2884895.8969588205, "Other Manufacturing and Recycling": 1611133.8144067656, "Electricity, Gas and Water": 3409273.2321472885, "Construction": 5477447.746477638, "Maintenance and Repair": 1688130.3892666595, "Wholesale": 5313745.6471816525, "Retail": 5660539.2067235885, "Hotels and Restaurants": 1079617.880374635, "Transport": 9193559.280474445, "Post and Telecommunications": 2502668.055094553, "Finance and Business": 7995430.768830435, "Public Administration": 3658840.773408715, "Education, Health and Other Services": 7859889.39095756, "Private Households": 41832.53088885739, "Others": 876819.8323126484} },
                    { id: 'MEX', name: 'Mexico', expenditure: 2840463994.3237596, continent: 'North America', sectors: {"Agriculture": 105249352.82413733, "Mining and Quarrying": 43183101.97677135, "Food": 343743576.34248704, "Textiles": 244005831.4758621, "Wood and Paper": 47035657.92343806, "Petroleum": 269945658.5288824, "Metal Products": 155234742.0315153, "Electrica and Machinery": 265519264.81343406, "Transport Equipment": 120746270.5623742, "Other Manufacturing and Recycling": 68049463.88575327, "Electricity, Gas and Water": 37078674.27203606, "Construction": 139580386.1958824, "Maintenance and Repair": 4744030.686381878, "Wholesale": 60699042.83591758, "Retail": 134962290.61857376, "Hotels and Restaurants": 35258238.4813478, "Transport": 175955038.49895, "Post and Telecommunications": 53264457.10572061, "Finance and Business": 329523650.0769287, "Public Administration": 60660478.162251055, "Education, Health and Other Services": 142047448.22042996, "Private Households": 54967.327570418856, "Others": 3922371.4771146164} },
                    { id: 'NLD', name: 'Netherlands', expenditure: 1972705846.052519, continent: 'Europe', sectors: {"Agriculture": 70906722.2321183, "Mining and Quarrying": 44688367.37470931, "Food": 204366331.14933684, "Textiles": 57027379.01565203, "Wood and Paper": 50263775.85268133, "Petroleum": 132334477.7373499, "Metal Products": 51957148.30722824, "Electrica and Machinery": 124009236.92899244, "Transport Equipment": 73721826.89792079, "Other Manufacturing and Recycling": 30122625.60347787, "Electricity, Gas and Water": 39918085.264008105, "Construction": 123968861.36448306, "Maintenance and Repair": 24117698.11863129, "Wholesale": 90202401.94155169, "Retail": 40788364.676629394, "Hotels and Restaurants": 42434984.80855647, "Transport": 78511173.32782528, "Post and Telecommunications": 40428784.04768721, "Finance and Business": 363591272.5574052, "Public Administration": 85471023.38995722, "Education, Health and Other Services": 183042438.1741414, "Private Households": 2294845.0739603075, "Others": 18538022.20821558} },
                    { id: 'POL', name: 'Poland', expenditure: 1300404798.5442784, continent: 'Europe', sectors: {"Agriculture": 63882822.871989846, "Mining and Quarrying": 21124368.477346763, "Food": 113659233.24282692, "Textiles": 41144870.545216545, "Wood and Paper": 33862513.69996949, "Petroleum": 113289356.59339514, "Metal Products": 54865523.6415693, "Electrica and Machinery": 89071994.4673218, "Transport Equipment": 42477570.226036355, "Other Manufacturing and Recycling": 17139199.77023313, "Electricity, Gas and Water": 39823197.52293788, "Construction": 98074764.0905501, "Maintenance and Repair": 27589279.80337109, "Wholesale": 58666139.85270193, "Retail": 50131253.25665228, "Hotels and Restaurants": 13400838.99230615, "Transport": 84471650.49667352, "Post and Telecommunications": 27464743.62058748, "Finance and Business": 175709509.5700369, "Public Administration": 36672329.07509685, "Education, Health and Other Services": 90894605.92679206, "Private Households": 2412134.9388021063, "Others": 4576897.861864841} },
                    { id: 'PRT', name: 'PRT', expenditure: 446943670.4544152, continent: 'Other', sectors: {"Agriculture": 19854994.885614324, "Mining and Quarrying": 6445180.476552122, "Food": 36643070.633585155, "Textiles": 20442452.555964805, "Wood and Paper": 9056163.879299525, "Petroleum": 35627082.18388417, "Metal Products": 13128561.481865983, "Electrica and Machinery": 24867374.876952767, "Transport Equipment": 17022101.445382133, "Other Manufacturing and Recycling": 4821625.068546455, "Electricity, Gas and Water": 12032625.181918029, "Construction": 32763157.7112958, "Maintenance and Repair": 9104967.551496746, "Wholesale": 15364951.458183402, "Retail": 16218186.544390172, "Hotels and Restaurants": 17393779.89096203, "Transport": 21902267.677825853, "Post and Telecommunications": 10043595.644291539, "Finance and Business": 69183353.84384015, "Public Administration": 13686572.722353397, "Education, Health and Other Services": 38668093.75255599, "Private Households": 1437723.3221414615, "Others": 1235787.6655131513} },
                    { id: 'KOR', name: 'South Korea', expenditure: 5532603947.459079, continent: 'Asia', sectors: {"Agriculture": 410711999.58956003, "Mining and Quarrying": 208794259.20239112, "Food": 944646441.5669382, "Textiles": 245230015.84167176, "Wood and Paper": 120045228.83874011, "Petroleum": 809426187.2780778, "Metal Products": 339852812.7449392, "Electrica and Machinery": 651038613.830579, "Transport Equipment": 169377520.30044574, "Other Manufacturing and Recycling": 108041731.93074304, "Electricity, Gas and Water": 104389537.74463058, "Construction": 160146918.86511064, "Maintenance and Repair": 1405721.7152326722, "Wholesale": 18832743.65812248, "Retail": 39490999.56717807, "Hotels and Restaurants": 233947409.90541202, "Transport": 203619771.74485466, "Post and Telecommunications": 55846608.96186501, "Finance and Business": 331815914.1777632, "Public Administration": 73922524.70196624, "Education, Health and Other Services": 291401001.28802246, "Private Households": 3537798.7852792144, "Others": 7082185.219554898} },
                    { id: 'ROU', name: 'ROU', expenditure: 472298951.6847597, continent: 'Other', sectors: {"Agriculture": 40639879.30052553, "Mining and Quarrying": 17944628.95127762, "Food": 66306688.66602316, "Textiles": 29269940.09224204, "Wood and Paper": 8024327.819449884, "Petroleum": 39531503.64487485, "Metal Products": 16201123.945173977, "Electrica and Machinery": 32714589.801598407, "Transport Equipment": 7601991.4139854945, "Other Manufacturing and Recycling": 5623378.382654263, "Electricity, Gas and Water": 23888969.861101754, "Construction": 25222792.426384464, "Maintenance and Repair": 1167815.7294768188, "Wholesale": 15025260.836864708, "Retail": 10716789.793931833, "Hotels and Restaurants": 8202676.510567002, "Transport": 23072166.805736203, "Post and Telecommunications": 10933428.059093917, "Finance and Business": 46840019.762993045, "Public Administration": 12807371.10831102, "Education, Health and Other Services": 30508612.048881005, "Private Households": 39167.188328863995, "Others": 15829.535283927085} },
                    { id: 'RUS', name: 'Russia', expenditure: 4295804075.987716, continent: 'Europe', sectors: {"Agriculture": 284128762.3063982, "Mining and Quarrying": 11090818.098770555, "Food": 581229760.4185772, "Textiles": 193946350.39581913, "Wood and Paper": 93068394.81268306, "Petroleum": 544900590.7873372, "Metal Products": 287230733.82708025, "Electrica and Machinery": 485612401.8463224, "Transport Equipment": 805306.79101674, "Other Manufacturing and Recycling": 88765061.28325525, "Electricity, Gas and Water": 95836574.29080442, "Construction": 241712993.97880644, "Maintenance and Repair": 11996045.055859879, "Wholesale": 156203999.2599945, "Retail": 340036837.8334239, "Hotels and Restaurants": 240246.7936815574, "Transport": 274797412.92914206, "Post and Telecommunications": 199179.95660835243, "Finance and Business": 298812804.3818136, "Public Administration": 49407246.38899077, "Education, Health and Other Services": 255497857.86506456, "Private Households": 146865.44465108967, "Others": 137831.241615341} },
                    { id: 'SVK', name: 'SVK', expenditure: 297690468.80472285, continent: 'Other', sectors: {"Agriculture": 11100675.542661926, "Mining and Quarrying": 13371577.049126087, "Food": 23837845.684591196, "Textiles": 14594288.501446607, "Wood and Paper": 6687703.815615744, "Petroleum": 24055670.82774319, "Metal Products": 16178530.083252963, "Electrica and Machinery": 27068488.346294396, "Transport Equipment": 13036094.058761232, "Other Manufacturing and Recycling": 3919689.0225853682, "Electricity, Gas and Water": 21357961.195331655, "Construction": 16741365.459577663, "Maintenance and Repair": 2051291.0771365222, "Wholesale": 10019682.406911984, "Retail": 7928796.299675198, "Hotels and Restaurants": 4575698.233108817, "Transport": 19255418.84618805, "Post and Telecommunications": 4616493.073263872, "Finance and Business": 31938475.9870661, "Public Administration": 8373836.591552661, "Education, Health and Other Services": 16317001.56909021, "Private Households": 22534.258431068072, "Others": 641350.8753102961} },
                    { id: 'SVN', name: 'SVN', expenditure: 121597318.38438176, continent: 'Other', sectors: {"Agriculture": 3741432.371546163, "Mining and Quarrying": 1094408.5537337747, "Food": 9226654.265695147, "Textiles": 7355979.659685881, "Wood and Paper": 4020824.6095923157, "Petroleum": 14402721.81457492, "Metal Products": 7710897.523433103, "Electrica and Machinery": 9130519.556604914, "Transport Equipment": 4526092.112347476, "Other Manufacturing and Recycling": 1144595.3820399204, "Electricity, Gas and Water": 2318408.4590095566, "Construction": 8432236.837069089, "Maintenance and Repair": 1988151.6921138717, "Wholesale": 4144399.516539186, "Retail": 5421157.071835034, "Hotels and Restaurants": 2861638.727673199, "Transport": 5755591.363667917, "Post and Telecommunications": 2226249.0013702568, "Finance and Business": 13171536.019400675, "Public Administration": 3730919.999181644, "Education, Health and Other Services": 8818242.724475494, "Private Households": 18430.058944533048, "Others": 356231.06384768354} },
                    { id: 'ESP', name: 'Spain', expenditure: 2841610282.7812862, continent: 'Europe', sectors: {"Agriculture": 86352048.89300495, "Mining and Quarrying": 60305065.283404425, "Food": 254033711.3478812, "Textiles": 127291814.06916437, "Wood and Paper": 61347891.08247286, "Petroleum": 231960907.3578635, "Metal Products": 119783238.88588195, "Electrica and Machinery": 133307518.68103518, "Transport Equipment": 130313037.72058108, "Other Manufacturing and Recycling": 42993341.43012847, "Electricity, Gas and Water": 61294051.533566795, "Construction": 278701435.3630289, "Maintenance and Repair": 24600726.450419985, "Wholesale": 87001267.78198642, "Retail": 73849835.7171486, "Hotels and Restaurants": 134883164.37760097, "Transport": 132416512.069746, "Post and Telecommunications": 59917518.124187015, "Finance and Business": 418032315.82922244, "Public Administration": 88326720.34752573, "Education, Health and Other Services": 225119894.1016524, "Private Households": 59905.519880780506, "Others": 9718360.813902076} },
                    { id: 'SWE', name: 'Sweden', expenditure: 1027821114.7048097, continent: 'Europe', sectors: {"Agriculture": 18713907.572681814, "Mining and Quarrying": 8222034.939729823, "Food": 61534934.8020325, "Textiles": 39759986.28372891, "Wood and Paper": 28234246.14335808, "Petroleum": 46503420.863362394, "Metal Products": 28944240.585451834, "Electrica and Machinery": 99555695.3081871, "Transport Equipment": 55656929.27658281, "Other Manufacturing and Recycling": 13823246.61202227, "Electricity, Gas and Water": 17883485.397209033, "Construction": 37681015.18331342, "Maintenance and Repair": 72134972.61222686, "Wholesale": 475487.71626982465, "Retail": 1014577.2924965997, "Hotels and Restaurants": 16391813.413254917, "Transport": 72314477.96250641, "Post and Telecommunications": 22923396.257217675, "Finance and Business": 222903536.4140424, "Public Administration": 36913797.93166254, "Education, Health and Other Services": 123396788.2153402, "Private Households": 67049.63115986169, "Others": 2772074.290972402} },
                    { id: 'TWN', name: 'Taiwan', expenditure: 887349469.7278068, continent: 'Asia', sectors: {"Agriculture": 45199396.37584186, "Mining and Quarrying": 10004544.746842396, "Food": 112574635.4507623, "Textiles": 42593556.301598795, "Wood and Paper": 11117779.213966686, "Petroleum": 135244399.8096595, "Metal Products": 56929685.38067318, "Electrica and Machinery": 154098948.28132695, "Transport Equipment": 31852245.052089304, "Other Manufacturing and Recycling": 23913238.16690599, "Electricity, Gas and Water": 12897296.71560358, "Construction": 15045817.180185592, "Maintenance and Repair": 1168076.5088358477, "Wholesale": 18248098.352113973, "Retail": 29025521.75252258, "Hotels and Restaurants": 10161453.174595583, "Transport": 17597950.633500785, "Post and Telecommunications": 10566423.566518731, "Finance and Business": 92731760.40523106, "Public Administration": 18857234.936752312, "Education, Health and Other Services": 30205592.08512949, "Private Households": 1229716.217260983, "Others": 6086099.419889378} },
                    { id: 'TUR', name: 'Turkey', expenditure: 1608111678.695936, continent: 'Asia', sectors: {"Agriculture": 227223692.27281678, "Mining and Quarrying": 23306397.55456212, "Food": 204140791.76556247, "Textiles": 86002209.25475952, "Wood and Paper": 17404800.54156803, "Petroleum": 108443152.1817332, "Metal Products": 89742013.66210335, "Electrica and Machinery": 103160753.40485993, "Transport Equipment": 40002175.03381972, "Other Manufacturing and Recycling": 12970439.711774016, "Electricity, Gas and Water": 27487091.48937443, "Construction": 95346750.81083898, "Maintenance and Repair": 21380162.012313884, "Wholesale": 40965521.02267608, "Retail": 42077126.484565675, "Hotels and Restaurants": 31675323.708673574, "Transport": 127686982.62708187, "Post and Telecommunications": 12031545.003955387, "Finance and Business": 139167234.66693467, "Public Administration": 62313693.47477307, "Education, Health and Other Services": 93092983.3254174, "Private Households": 747196.986856846, "Others": 1743641.698914698} },
                    { id: 'GBR', name: 'United Kingdom', expenditure: 5573912104.351779, continent: 'Europe', sectors: {"Agriculture": 77573585.92547674, "Mining and Quarrying": 81949521.55683629, "Food": 301877342.9166913, "Textiles": 164940278.87536007, "Wood and Paper": 100793471.05796747, "Petroleum": 319348580.17290676, "Metal Products": 137154472.32767737, "Electrica and Machinery": 366328200.70818484, "Transport Equipment": 128273883.75094955, "Other Manufacturing and Recycling": 68761552.76080215, "Electricity, Gas and Water": 135586385.17775667, "Construction": 371468193.4604571, "Maintenance and Repair": 58839531.1280462, "Wholesale": 248127894.96796978, "Retail": 171870211.54443642, "Hotels and Restaurants": 198011162.30191466, "Transport": 395762131.7554873, "Post and Telecommunications": 134975362.04444432, "Finance and Business": 1213500120.0920668, "Public Administration": 220028929.08561698, "Education, Health and Other Services": 652450097.276628, "Private Households": 9999075.41000621, "Others": 16292120.054096676} },
                    { id: 'USA', name: 'United States', expenditure: 40379756178.43039, continent: 'North America', sectors: {"Agriculture": 493794351.73699296, "Mining and Quarrying": 533996004.8684378, "Food": 4367114703.915406, "Textiles": 2419947069.2829785, "Wood and Paper": 454058813.1340277, "Petroleum": 2191430291.3869877, "Metal Products": 763590383.0980881, "Electrica and Machinery": 2656120725.9696975, "Transport Equipment": 1099094672.3916283, "Other Manufacturing and Recycling": 589130125.0644305, "Electricity, Gas and Water": 544921402.390061, "Construction": 1666907222.8278997, "Maintenance and Repair": 43783150.181264795, "Wholesale": 1151097793.7128496, "Retail": 878016159.839556, "Hotels and Restaurants": 1031030184.2398691, "Transport": 1721175632.4673948, "Post and Telecommunications": 1187448063.946385, "Finance and Business": 8715861283.745026, "Public Administration": 2733986928.2064867, "Education, Health and Other Services": 5031624515.467079, "Private Households": 59326462.79792869, "Others": 46300237.759909585} },
                    { id: 'VNM', name: 'Vietnam', expenditure: 1173777202.4616997, continent: 'Asia', sectors: {"Agriculture": 52834706.94841805, "Mining and Quarrying": 3140645.254483045, "Food": 228958434.89663988, "Textiles": 92765206.33455369, "Wood and Paper": 24497266.759089403, "Petroleum": 277570818.47198445, "Metal Products": 61038379.039583616, "Electrica and Machinery": 109484503.29487953, "Transport Equipment": 75636431.90377422, "Other Manufacturing and Recycling": 34001245.706243, "Electricity, Gas and Water": 7988430.398274814, "Construction": 24490784.75245292, "Maintenance and Repair": 2123212.396232438, "Wholesale": 80250006.06525663, "Retail": 26011719.66733574, "Hotels and Restaurants": 7437501.748071669, "Transport": 11754704.007960044, "Post and Telecommunications": 2527750.3665360287, "Finance and Business": 15316264.088226877, "Public Administration": 12256792.988406284, "Education, Health and Other Services": 20006070.26468969, "Private Households": 58046.58057537081, "Others": 3628280.5280324067} },
                    { id: 'ROW', name: 'ROW', expenditure: 54003489774.88676, continent: 'Other', sectors: {"Agriculture": 2508838439.9688225, "Mining and Quarrying": 976269026.9267758, "Food": 8187462727.041591, "Textiles": 3990629611.539502, "Wood and Paper": 1544610053.291468, "Petroleum": 6430966111.902429, "Metal Products": 3060369841.252961, "Electrica and Machinery": 7725050570.749397, "Transport Equipment": 2479351529.9128294, "Other Manufacturing and Recycling": 1662936895.6988833, "Electricity, Gas and Water": 781873683.4777179, "Construction": 1775249207.4626188, "Maintenance and Repair": 79917915.20444904, "Wholesale": 1075168920.2903888, "Retail": 1333827062.2972572, "Hotels and Restaurants": 794392245.6358736, "Transport": 1632115093.6815367, "Post and Telecommunications": 714674244.0172191, "Finance and Business": 3990731966.655857, "Public Administration": 1160768475.7023387, "Education, Health and Other Services": 1822415685.7957733, "Private Households": 28964427.606877707, "Others": 246906038.77419254} }
                ],
                links: []
            },
            counterfactual: {
                nodes: [
                    { id: "AUS", name: "Australia", expenditure: 2887818372.656451, continent: "Oceania", sectors: {"Agriculture": 43756255.752865285, "Mining and Quarrying": 56234524.705074154, "Food": 90003525.77524969, "Textiles": 28459113.895284954, "Wood and Paper": 53891005.18430174, "Petroleum": 139231230.26059854, "Metal Products": 91684925.77845293, "Electrica and Machinery": 48612436.64942202, "Transport Equipment": 44716252.49429197, "Other Manufacturing and Recycling": 13691463.33724118, "Electricity, Gas and Water": 41777345.01179702, "Construction": 193603637.05106762, "Maintenance and Repair": 3963372.857009434, "Wholesale": 129972612.9933535, "Retail": 80742413.99147196, "Hotels and Restaurants": 80663102.00854658, "Transport": 173736823.07246852, "Post and Telecommunications": 81011386.87296186, "Finance and Business": 712646680.5839609, "Public Administration": 134844389.39395112, "Education, Health and Other Services": 385401564.93811905, "Private Households": 2481867.6241422603, "Others": 4552920.97405792} },
                    { id: "AUT", name: "Austria", expenditure: 1032464557.8756523, continent: "Europe", sectors: {"Agriculture": 18418121.635917507, "Mining and Quarrying": 7671696.558749728, "Food": 33382488.334844958, "Textiles": 27358956.263861127, "Wood and Paper": 35352715.507489316, "Petroleum": 56353908.98216625, "Metal Products": 36833789.73059919, "Electrica and Machinery": 79476336.96435466, "Transport Equipment": 42743701.99764635, "Other Manufacturing and Recycling": 14017103.514623713, "Electricity, Gas and Water": 23601650.303291213, "Construction": 60752206.62745759, "Maintenance and Repair": 13320684.116168397, "Wholesale": 50207017.76141968, "Retail": 31157102.44565131, "Hotels and Restaurants": 35143154.26466065, "Transport": 43079307.2568564, "Post and Telecommunications": 17591318.02971825, "Finance and Business": 165078468.93586415, "Public Administration": 27927081.11766061, "Education, Health and Other Services": 78292197.49164209, "Private Households": 599917.5351460259, "Others": 2693858.12071708} },
                    { id: "BEL", name: "Belgium", expenditure: 1368161789.9998004, continent: "Europe", sectors: {"Agriculture": 25783195.51310105, "Mining and Quarrying": 14018241.221566906, "Food": 105946499.08796293, "Textiles": 40559207.44333266, "Wood and Paper": 30722282.305308882, "Petroleum": 114094100.10945994, "Metal Products": 46429248.33663629, "Electrica and Machinery": 78426190.44896573, "Transport Equipment": 61192971.49929794, "Other Manufacturing and Recycling": 17176818.158047713, "Electricity, Gas and Water": 22423836.31181201, "Construction": 93110545.69175081, "Maintenance and Repair": 19957566.322474245, "Wholesale": 83759171.40470877, "Retail": 21152724.722027097, "Hotels and Restaurants": 27945856.15535913, "Transport": 89623893.8232033, "Post and Telecommunications": 22936605.411632437, "Finance and Business": 209436653.72566772, "Public Administration": 41548731.36568539, "Education, Health and Other Services": 109090965.36295852, "Private Households": 1460079.4580190182, "Others": 3655083.482474703} },
                    { id: "BRA", name: "Brazil", expenditure: 5619813115.710561, continent: "South America", sectors: {"Agriculture": 197935347.58984685, "Mining and Quarrying": 122337532.90184915, "Food": 350201077.1021683, "Textiles": 239876720.2388295, "Wood and Paper": 89682851.59202157, "Petroleum": 765262484.3697109, "Metal Products": 180651309.39449236, "Electrica and Machinery": 764144715.6240896, "Transport Equipment": 312956819.5087799, "Other Manufacturing and Recycling": 76687782.60656972, "Electricity, Gas and Water": 104992524.58674783, "Construction": 144058749.5684509, "Maintenance and Repair": 3640222.0833991277, "Wholesale": 58802954.884076715, "Retail": 113739543.98147532, "Hotels and Restaurants": 113775258.66264832, "Transport": 108477856.2440049, "Post and Telecommunications": 104630644.46789241, "Finance and Business": 518437503.5235608, "Public Administration": 221720150.56734723, "Education, Health and Other Services": 321573426.6965608, "Private Households": 19158990.349931467, "Others": 36130478.65609124} },
                    { id: "BGR", name: "BGR", expenditure: 182578760.39161846, continent: "Other", sectors: {"Agriculture": 5844476.400082606, "Mining and Quarrying": 4345084.911123161, "Food": 11163230.849589135, "Textiles": 3703734.0421611676, "Wood and Paper": 4295909.450253612, "Petroleum": 15062484.797512397, "Metal Products": 5016382.209627147, "Electrica and Machinery": 12134671.186163291, "Transport Equipment": 4375349.452760824, "Other Manufacturing and Recycling": 2208568.505340956, "Electricity, Gas and Water": 9486308.312266804, "Construction": 8611050.820131144, "Maintenance and Repair": 234785.90886529032, "Wholesale": 8661559.393408662, "Retail": 3588322.7467051493, "Hotels and Restaurants": 5836598.0249015195, "Transport": 12934841.546599358, "Post and Telecommunications": 7027878.45120464, "Finance and Business": 22368729.79623869, "Public Administration": 5662440.704803301, "Education, Health and Other Services": 8876279.041305657, "Private Households": 83309.05624776214, "Others": 418432.51416354795} },
                    { id: "CAN", name: "Canada", expenditure: 3842706482.643058, continent: "North America", sectors: {"Agriculture": 93099558.91581687, "Mining and Quarrying": 99654002.4720983, "Food": 193103861.39618096, "Textiles": 115899471.62148914, "Wood and Paper": 109180118.3020122, "Petroleum": 160035616.59772956, "Metal Products": 123343281.63417862, "Electrica and Machinery": 196895754.55529615, "Transport Equipment": 165118379.09881032, "Other Manufacturing and Recycling": 74680434.38176097, "Electricity, Gas and Water": 33162757.338549536, "Construction": 268262573.22329026, "Maintenance and Repair": 7825573.58435192, "Wholesale": 83090295.21911705, "Retail": 192967443.71602273, "Hotels and Restaurants": 94590770.16996682, "Transport": 345208686.20349467, "Post and Telecommunications": 65483959.97183084, "Finance and Business": 606113561.606381, "Public Administration": 225593558.7442098, "Education, Health and Other Services": 259725343.6183464, "Private Households": 54890.658991017095, "Others": 3493991.465173467} },
                    { id: "CHN", name: "China", expenditure: 40863907075.314354, continent: "Asia", sectors: {"Agriculture": 2088891276.0352015, "Mining and Quarrying": 1167293856.661995, "Food": 3134880899.812376, "Textiles": 1812191343.6363897, "Wood and Paper": 852344692.367023, "Petroleum": 6663692702.535132, "Metal Products": 4281424219.103963, "Electrica and Machinery": 8966080516.527088, "Transport Equipment": 1792396298.1112673, "Other Manufacturing and Recycling": 537660929.938083, "Electricity, Gas and Water": 905094497.8612595, "Construction": 2509814465.8154955, "Maintenance and Repair": 28516156.033092573, "Wholesale": 328185774.2563326, "Retail": 727565050.575726, "Hotels and Restaurants": 477710742.94065976, "Transport": 1135607367.063439, "Post and Telecommunications": 300449140.98095393, "Finance and Business": 2374759952.219282, "Public Administration": 90865280.74089684, "Education, Health and Other Services": 1244625651.2934208, "Private Households": 6623080.923387489, "Others": 767535965.7215039} },
                    { id: "CZE", name: "Czech Republic", expenditure: 513404301.50779164, continent: "Europe", sectors: {"Agriculture": 16798970.78434858, "Mining and Quarrying": 13877472.158298628, "Food": 43733824.41854247, "Textiles": 20336142.29335045, "Wood and Paper": 17168178.123957194, "Petroleum": 61863427.23849299, "Metal Products": 31216858.517342612, "Electrica and Machinery": 54635929.680556044, "Transport Equipment": 22655195.322907872, "Other Manufacturing and Recycling": 8092139.1193497, "Electricity, Gas and Water": 24119799.331072725, "Construction": 41999968.734374836, "Maintenance and Repair": 8500904.655715505, "Wholesale": 22159138.54297302, "Retail": 7311683.291111441, "Hotels and Restaurants": 8912395.647462105, "Transport": 30087560.51434673, "Post and Telecommunications": 9611152.127378166, "Finance and Business": 71686870.41791604, "Public Administration": 10143622.41565091, "Education, Health and Other Services": 27064328.904329784, "Private Households": 42032.85024022696, "Others": 1414748.5037708164} },
                    { id: "DNK", name: "Denmark", expenditure: 657823168.8799387, continent: "Europe", sectors: {"Agriculture": 17310429.070700485, "Mining and Quarrying": 6080359.9555969825, "Food": 62152580.27335416, "Textiles": 18609870.101188753, "Wood and Paper": 17720478.469231743, "Petroleum": 42580318.00742467, "Metal Products": 24208104.13234502, "Electrica and Machinery": 52476654.05385532, "Transport Equipment": 15400546.076114217, "Other Manufacturing and Recycling": 10686633.87239736, "Electricity, Gas and Water": 9420755.00517165, "Construction": 48142069.6325158, "Maintenance and Repair": 5485601.324869618, "Wholesale": 43095593.62034978, "Retail": 11054477.101629391, "Hotels and Restaurants": 11054989.58645258, "Transport": 62106890.55764199, "Post and Telecommunications": 25614224.78178192, "Finance and Business": 148623858.50222388, "Public Administration": 49475133.87687615, "Education, Health and Other Services": 61082135.36802849, "Private Households": 378663.63471246214, "Others": 1415907.4483637437} },
                    { id: "EST", name: "EST", expenditure: 72872561.70547064, continent: "Other", sectors: {"Agriculture": 3145485.9463606207, "Mining and Quarrying": 637952.4852837768, "Food": 6299987.019436853, "Textiles": 4655275.123248897, "Wood and Paper": 2161121.849552841, "Petroleum": 5681096.523238542, "Metal Products": 2370787.763361395, "Electrica and Machinery": 6603958.032644621, "Transport Equipment": 2147672.655338486, "Other Manufacturing and Recycling": 918666.2428857648, "Electricity, Gas and Water": 2530551.364329914, "Construction": 3361304.435689017, "Maintenance and Repair": 1007330.6058110904, "Wholesale": 2587288.1611159714, "Retail": 1805562.450841748, "Hotels and Restaurants": 1012959.2294742679, "Transport": 7888409.30876237, "Post and Telecommunications": 1471720.052122907, "Finance and Business": 7314146.779608513, "Public Administration": 2438391.504092528, "Education, Health and Other Services": 3787532.1477293656, "Private Households": 14718.930559100976, "Others": 165077.40761111028} },
                    { id: "FIN", name: "Finland", expenditure: 563019272.893956, continent: "Europe", sectors: {"Agriculture": 21338537.126547836, "Mining and Quarrying": 11878660.757027488, "Food": 32859243.817382347, "Textiles": 16758294.186060026, "Wood and Paper": 30966158.608293373, "Petroleum": 33039383.90952715, "Metal Products": 20632873.706264168, "Electrica and Machinery": 70834426.29663725, "Transport Equipment": 12547836.830025611, "Other Manufacturing and Recycling": 5368716.809101298, "Electricity, Gas and Water": 11213232.19939354, "Construction": 32752422.319228604, "Maintenance and Repair": 6086503.825980398, "Wholesale": 32222752.796493284, "Retail": 13127588.700039588, "Hotels and Restaurants": 8307292.413232891, "Transport": 32315769.458036903, "Post and Telecommunications": 10719838.145415736, "Finance and Business": 104472393.96202211, "Public Administration": 22872670.651473507, "Education, Health and Other Services": 66695431.38607986, "Private Households": 107501.4919386727, "Others": 1160715.4280925423} },
                    { id: "FRA", name: "France", expenditure: 6201431259.269309, continent: "Europe", sectors: {"Agriculture": 158810468.743158, "Mining and Quarrying": 80972614.01039065, "Food": 446730922.01335084, "Textiles": 166002030.4186359, "Wood and Paper": 102523973.78350799, "Petroleum": 451523899.5577135, "Metal Products": 183749488.34920788, "Electrica and Machinery": 388055669.4377761, "Transport Equipment": 278875727.148264, "Other Manufacturing and Recycling": 48857761.21523951, "Electricity, Gas and Water": 97962824.85834284, "Construction": 277395564.48066235, "Maintenance and Repair": 60391796.31268083, "Wholesale": 220331479.13098037, "Retail": 162654513.42630234, "Hotels and Restaurants": 126651928.3642311, "Transport": 280812193.7707335, "Post and Telecommunications": 108745513.90809676, "Finance and Business": 1171646171.5140405, "Public Administration": 226128593.40132165, "Education, Health and Other Services": 600441693.0728972, "Private Households": 12435363.720708266, "Others": 14335751.52908201} },
                    { id: "DEU", name: "Germany", expenditure: 7783926639.521335, continent: "Europe", sectors: {"Agriculture": 142946474.734271, "Mining and Quarrying": 52517565.554000475, "Food": 455375385.96698934, "Textiles": 238508342.37777063, "Wood and Paper": 156766898.19848123, "Petroleum": 644166300.2162043, "Metal Products": 473018912.1203729, "Electrica and Machinery": 596642415.2105047, "Transport Equipment": 455494818.6398418, "Other Manufacturing and Recycling": 86911096.16587256, "Electricity, Gas and Water": 197014588.29549897, "Construction": 414172098.6395386, "Maintenance and Repair": 9498582.841241637, "Wholesale": 297711739.5214324, "Retail": 177876336.3759472, "Hotels and Restaurants": 109671739.78100663, "Transport": 443324970.36621875, "Post and Telecommunications": 155435604.2460409, "Finance and Business": 1763212557.9379091, "Public Administration": 325858284.74626434, "Education, Health and Other Services": 1052913133.355529, "Private Households": 109111.68039349747, "Others": 11087771.525884809} },
                    { id: "GRC", name: "GRC", expenditure: 374773825.1005335, continent: "Other", sectors: {"Agriculture": 18360784.85737002, "Mining and Quarrying": 13611625.26862102, "Food": 35098924.2724444, "Textiles": 11422241.59840327, "Wood and Paper": 6563388.902571585, "Petroleum": 24563989.930305123, "Metal Products": 11372243.175275238, "Electrica and Machinery": 15265831.900764644, "Transport Equipment": 7937354.869753667, "Other Manufacturing and Recycling": 3255443.280086909, "Electricity, Gas and Water": 9158109.978297288, "Construction": 23460627.955228616, "Maintenance and Repair": 6735741.319241127, "Wholesale": 17436354.41063858, "Retail": 16438735.304030912, "Hotels and Restaurants": 22884738.975988552, "Transport": 34593353.79470435, "Post and Telecommunications": 9475516.172982082, "Finance and Business": 59868015.94103398, "Public Administration": 26724718.838483483, "Education, Health and Other Services": 28869261.764021162, "Private Households": 985631.8363102383, "Others": 3213779.8005458764} },
                    { id: "HUN", name: "HUN", expenditure: 336048775.7406183, continent: "Other", sectors: {"Agriculture": 16838106.685295977, "Mining and Quarrying": 4187842.115506433, "Food": 19949354.62270716, "Textiles": 16983720.74131634, "Wood and Paper": 8978402.86547535, "Petroleum": 30605391.518401857, "Metal Products": 13479286.12056599, "Electrica and Machinery": 63414306.13349055, "Transport Equipment": 20184459.93099194, "Other Manufacturing and Recycling": 5465017.87049934, "Electricity, Gas and Water": 9815705.14198992, "Construction": 13532756.980054064, "Maintenance and Repair": 4112962.6845199, "Wholesale": 12433316.904440116, "Retail": 10246699.154743243, "Hotels and Restaurants": 6287205.949103395, "Transport": 14185277.804242808, "Post and Telecommunications": 7846522.747724572, "Finance and Business": 40304872.46824827, "Public Administration": 13936807.410716034, "Education, Health and Other Services": 22271569.173842352, "Private Households": 15531.001798483081, "Others": 1927157.871849984} },
                    { id: "IND", name: "India", expenditure: 8528940635.445738, continent: "Asia", sectors: {"Agriculture": 1034924990.2308211, "Mining and Quarrying": 200360606.09081447, "Food": 373217565.5930957, "Textiles": 156480053.63840693, "Wood and Paper": 216439651.46239486, "Petroleum": 1287689076.7638342, "Metal Products": 1109958910.8036256, "Electrica and Machinery": 571162416.051624, "Transport Equipment": 157767032.8998308, "Other Manufacturing and Recycling": 370296075.85024524, "Electricity, Gas and Water": 149130015.21630156, "Construction": 407955034.9181784, "Maintenance and Repair": 9698866.259538196, "Wholesale": 112081790.81243639, "Retail": 226132737.00277328, "Hotels and Restaurants": 107132649.76733673, "Transport": 454261485.26214874, "Post and Telecommunications": 49326195.298481986, "Finance and Business": 509234313.65653825, "Public Administration": 126469719.24051306, "Education, Health and Other Services": 122059076.76562706, "Private Households": 596134.2611290163, "Others": 82214573.31680463} },
                    { id: "IRL", name: "IRL", expenditure: 695552387.8339269, continent: "Other", sectors: {"Agriculture": 17790187.130767506, "Mining and Quarrying": 2070549.3182668393, "Food": 31558859.362968873, "Textiles": 16063154.179669002, "Wood and Paper": 29813384.800966017, "Petroleum": 40399678.35428282, "Metal Products": 12332837.877602614, "Electrica and Machinery": 101332438.30868442, "Transport Equipment": 57483508.63817879, "Other Manufacturing and Recycling": 9289817.323751818, "Electricity, Gas and Water": 6860827.473504504, "Construction": 49044354.29209431, "Maintenance and Repair": 5141437.146625381, "Wholesale": 69924898.03024195, "Retail": 15829680.353271455, "Hotels and Restaurants": 15788159.669449223, "Transport": 20719326.44350802, "Post and Telecommunications": 15368654.767617106, "Finance and Business": 155293898.77112824, "Public Administration": 20393821.11124645, "Education, Health and Other Services": 34687350.93143699, "Private Households": 64361.54083078473, "Others": 1688403.5174628864} },
                    { id: "ITA", name: "Italy", expenditure: 4180317481.6829133, continent: "Europe", sectors: {"Agriculture": 99946370.65453602, "Mining and Quarrying": 51053444.20056622, "Food": 323151177.4455763, "Textiles": 240280317.07087573, "Wood and Paper": 90178355.31627598, "Petroleum": 240312109.76361212, "Metal Products": 143917231.67829934, "Electrica and Machinery": 203219202.3002134, "Transport Equipment": 124008109.66651699, "Other Manufacturing and Recycling": 63276658.473728776, "Electricity, Gas and Water": 73450360.6048442, "Construction": 181974558.38049433, "Maintenance and Repair": 73774746.9483612, "Wholesale": 181994996.4493723, "Retail": 179175581.46048233, "Hotels and Restaurants": 139440281.29104865, "Transport": 244718941.42862502, "Post and Telecommunications": 69902857.20615134, "Finance and Business": 606964973.7270508, "Public Administration": 150718998.37581035, "Education, Health and Other Services": 371840302.0762213, "Private Households": 8250284.270013345, "Others": 17009378.603612646} },
                    { id: "JPN", name: "Japan", expenditure: 9425583308.890675, continent: "Asia", sectors: {"Agriculture": 292433362.9554655, "Mining and Quarrying": 159667141.9178658, "Food": 851570815.2178525, "Textiles": 387034284.14591134, "Wood and Paper": 231959170.92732415, "Petroleum": 714704814.3471316, "Metal Products": 498489896.7963446, "Electrica and Machinery": 702050225.1797795, "Transport Equipment": 328659024.7853603, "Other Manufacturing and Recycling": 119566641.32480323, "Electricity, Gas and Water": 294854455.4617843, "Construction": 614690034.040666, "Maintenance and Repair": 17002550.73288405, "Wholesale": 542507879.457123, "Retail": 281955497.1581208, "Hotels and Restaurants": 244192304.04754284, "Transport": 570183657.5220969, "Post and Telecommunications": 340886729.8034259, "Finance and Business": 1967037417.9542856, "Public Administration": 304257170.97886354, "Education, Health and Other Services": 1156572709.895874, "Private Households": 1437149.0023998872, "Others": 68359922.0079281} },
                    { id: "LTU", name: "LTU", expenditure: 122696698.30095747, continent: "Other", sectors: {"Agriculture": 5729523.88764812, "Mining and Quarrying": 4985774.749404594, "Food": 16327308.798391882, "Textiles": 6115277.270905785, "Wood and Paper": 3154410.7288390626, "Petroleum": 7867843.489878486, "Metal Products": 1712720.3977998858, "Electrica and Machinery": 5811606.404767073, "Transport Equipment": 2571919.941109043, "Other Manufacturing and Recycling": 1481241.6992336987, "Electricity, Gas and Water": 3607641.6031826334, "Construction": 5816642.765229041, "Maintenance and Repair": 1467438.8333039912, "Wholesale": 5166447.613012347, "Retail": 5732899.8161632735, "Hotels and Restaurants": 1052338.387519491, "Transport": 8384988.654775719, "Post and Telecommunications": 2442711.774976351, "Finance and Business": 8966488.1766687, "Public Administration": 3751130.7300771363, "Education, Health and Other Services": 8320926.105136675, "Private Households": 46309.43201697715, "Others": 946683.4098211469} },
                    { id: "MEX", name: "Mexico", expenditure: 2738531980.2130923, continent: "North America", sectors: {"Agriculture": 89648117.59494042, "Mining and Quarrying": 41262647.55435696, "Food": 369882710.1430188, "Textiles": 269878839.7944782, "Wood and Paper": 53433876.21115465, "Petroleum": 263387702.5726873, "Metal Products": 166761651.33828497, "Electrica and Machinery": 269193969.90283644, "Transport Equipment": 124486480.07454363, "Other Manufacturing and Recycling": 62344306.27733025, "Electricity, Gas and Water": 33957632.12674043, "Construction": 136893574.42289472, "Maintenance and Repair": 4073734.474372774, "Wholesale": 57715008.881939605, "Retail": 142215510.36332032, "Hotels and Restaurants": 34246150.771877326, "Transport": 158273918.33399618, "Post and Telecommunications": 52743373.30648874, "Finance and Business": 292712015.8487993, "Public Administration": 62885327.87565618, "Education, Health and Other Services": 121889485.69157058, "Private Households": 53219.70058473751, "Others": 3998142.260385983} },
                    { id: "NLD", name: "Netherlands", expenditure: 1692839278.7212973, continent: "Europe", sectors: {"Agriculture": 73943295.12415747, "Mining and Quarrying": 39804368.82987865, "Food": 202018066.60938576, "Textiles": 49333552.41908996, "Wood and Paper": 48440766.97111053, "Petroleum": 120887292.02740705, "Metal Products": 49258168.84848806, "Electrica and Machinery": 133727705.950729, "Transport Equipment": 71048516.03411758, "Other Manufacturing and Recycling": 32399984.87247966, "Electricity, Gas and Water": 43893019.83881503, "Construction": 114755676.52473131, "Maintenance and Repair": 21092660.33957049, "Wholesale": 77196567.36514899, "Retail": 41270716.227190346, "Hotels and Restaurants": 48799059.14109649, "Transport": 74977236.48975569, "Post and Telecommunications": 42249826.98429771, "Finance and Business": 394267437.2753727, "Public Administration": 89362211.09632282, "Education, Health and Other Services": 197003077.83490533, "Private Households": 2604381.8549657213, "Others": 16866044.704107735} },
                    { id: "POL", name: "Poland", expenditure: 1113294760.4579694, continent: "Europe", sectors: {"Agriculture": 57220783.76256779, "Mining and Quarrying": 18755614.720588546, "Food": 119437401.94654123, "Textiles": 41934476.59541922, "Wood and Paper": 30997384.820740283, "Petroleum": 120068534.07001407, "Metal Products": 59258574.81914557, "Electrica and Machinery": 80194789.39214359, "Transport Equipment": 43844254.11203189, "Other Manufacturing and Recycling": 18413973.95334121, "Electricity, Gas and Water": 35218037.44243452, "Construction": 107469380.29386868, "Maintenance and Repair": 31435673.234674, "Wholesale": 51768739.78439125, "Retail": 42997752.7637081, "Hotels and Restaurants": 12644859.784845272, "Transport": 88965895.90608184, "Post and Telecommunications": 31239823.481160026, "Finance and Business": 170261870.35083038, "Public Administration": 39037856.08096455, "Education, Health and Other Services": 79332716.00938398, "Private Households": 2550071.2465554955, "Others": 4751610.496374335} },
                    { id: "PRT", name: "PRT", expenditure: 393565362.93028927, continent: "Other", sectors: {"Agriculture": 21478026.858754586, "Mining and Quarrying": 7122491.420245117, "Food": 37746887.601834945, "Textiles": 18118483.399859432, "Wood and Paper": 10370696.001116605, "Petroleum": 38647923.99774656, "Metal Products": 12526763.053462287, "Electrica and Machinery": 24333059.63865564, "Transport Equipment": 16361154.742881183, "Other Manufacturing and Recycling": 4830247.276427054, "Electricity, Gas and Water": 11459503.45287773, "Construction": 36199118.131119475, "Maintenance and Repair": 9985411.316512985, "Wholesale": 13546688.626774853, "Retail": 18460128.1611167, "Hotels and Restaurants": 18101281.138568416, "Transport": 24062098.331796106, "Post and Telecommunications": 10668232.90157664, "Finance and Business": 67844389.14151707, "Public Administration": 14646529.6515106, "Education, Health and Other Services": 44067788.3162158, "Private Households": 1338555.9518760485, "Others": 1350048.3034498047} },
                    { id: "KOR", name: "South Korea", expenditure: 5595962619.32956, continent: "Asia", sectors: {"Agriculture": 408678667.6360546, "Mining and Quarrying": 204758756.400294, "Food": 1010117868.9425424, "Textiles": 228191106.07971466, "Wood and Paper": 132711674.87277523, "Petroleum": 889736891.5686424, "Metal Products": 297710679.73265296, "Electrica and Machinery": 725575604.9388852, "Transport Equipment": 156362387.64200968, "Other Manufacturing and Recycling": 106897844.41353948, "Electricity, Gas and Water": 107844780.42559098, "Construction": 154333071.8370362, "Maintenance and Repair": 1206966.7209755345, "Wholesale": 20815565.09883155, "Retail": 35721660.9481944, "Hotels and Restaurants": 213742765.28132242, "Transport": 221813138.69952542, "Post and Telecommunications": 53171648.70420403, "Finance and Business": 369674780.70682645, "Public Administration": 78384127.92803614, "Education, Health and Other Services": 271842332.9747495, "Private Households": 3017902.747586447, "Others": 8034163.869285345} },
                    { id: "ROU", name: "ROU", expenditure: 413584582.5870659, continent: "Other", sectors: {"Agriculture": 43323021.636414975, "Mining and Quarrying": 17883139.06124067, "Food": 71442101.65693325, "Textiles": 30943677.276228506, "Wood and Paper": 8375559.628648803, "Petroleum": 39422649.71713606, "Metal Products": 17624876.45644207, "Electrica and Machinery": 28720661.98927677, "Transport Equipment": 6967064.88201635, "Other Manufacturing and Recycling": 5946925.9056016, "Electricity, Gas and Water": 22500108.36945608, "Construction": 25839910.306399636, "Maintenance and Repair": 1158447.6829292742, "Wholesale": 15164643.861178128, "Retail": 10477281.800025556, "Hotels and Restaurants": 8807875.159521032, "Transport": 21900963.380912878, "Post and Telecommunications": 11598798.034139846, "Finance and Business": 43620936.036649436, "Public Administration": 11852211.495794103, "Education, Health and Other Services": 27036633.315345634, "Private Households": 35555.00566677343, "Others": 14022.853789855311} },
                    { id: "RUS", name: "Russia", expenditure: 4342023446.590694, continent: "Europe", sectors: {"Agriculture": 306477445.076093, "Mining and Quarrying": 10043234.351002613, "Food": 531776054.07426125, "Textiles": 193026962.49346122, "Wood and Paper": 99338924.47790356, "Petroleum": 622811625.2900487, "Metal Products": 289353673.6250604, "Electrica and Machinery": 453998845.57439774, "Transport Equipment": 708797.079620228, "Other Manufacturing and Recycling": 80619559.70539033, "Electricity, Gas and Water": 88001450.27628466, "Construction": 218468050.71249875, "Maintenance and Repair": 10247555.632802075, "Wholesale": 157803610.49760628, "Retail": 317014099.00079226, "Hotels and Restaurants": 274431.14461861184, "Transport": 279196284.7389909, "Post and Telecommunications": 210976.43293442842, "Finance and Business": 265311062.55258623, "Public Administration": 54868642.33637661, "Education, Health and Other Services": 254798715.66203234, "Private Households": 163287.3395343285, "Others": 140893.75062045158} },
                    { id: "SVK", name: "SVK", expenditure: 294957397.4615749, continent: "Other", sectors: {"Agriculture": 10902424.575694866, "Mining and Quarrying": 12105410.398861371, "Food": 20629581.90870342, "Textiles": 16525391.31506243, "Wood and Paper": 6643021.635825708, "Petroleum": 26380283.207279943, "Metal Products": 15696607.793481924, "Electrica and Machinery": 23609802.80302013, "Transport Equipment": 13542333.98215996, "Other Manufacturing and Recycling": 3394774.939202185, "Electricity, Gas and Water": 19110233.88191957, "Construction": 17056971.65761525, "Maintenance and Repair": 1930573.9378737947, "Wholesale": 11504353.224284358, "Retail": 7021230.347169814, "Hotels and Restaurants": 4938702.254769699, "Transport": 19869576.117815908, "Post and Telecommunications": 5019153.981390013, "Finance and Business": 29310135.551328577, "Public Administration": 8430542.207743919, "Education, Health and Other Services": 16074764.90287297, "Private Households": 22147.036521637903, "Others": 710648.8372258596} },
                    { id: "SVN", name: "SVN", expenditure: 139473264.5435661, continent: "Other", sectors: {"Agriculture": 3522985.375332378, "Mining and Quarrying": 1134144.5543588276, "Food": 9530112.222930722, "Textiles": 7885807.273981607, "Wood and Paper": 4560729.117336506, "Petroleum": 13140126.963591592, "Metal Products": 7042420.99167684, "Electrica and Machinery": 9569957.229823392, "Transport Equipment": 4060434.7569571775, "Other Manufacturing and Recycling": 1032589.9301590552, "Electricity, Gas and Water": 2022856.4982685964, "Construction": 7174170.009518075, "Maintenance and Repair": 1958629.8490885666, "Wholesale": 4261036.83804903, "Retail": 5081672.217400238, "Hotels and Restaurants": 2631113.3257246655, "Transport": 6112937.319801665, "Post and Telecommunications": 2361819.255919274, "Finance and Business": 12989892.607402563, "Public Administration": 3940655.4429333005, "Education, Health and Other Services": 9939687.869625406, "Private Households": 20021.465193629414, "Others": 369595.92792811815} },
                    { id: "ESP", name: "Spain", expenditure: 2979016100.3759184, continent: "Europe", sectors: {"Agriculture": 97586496.87111726, "Mining and Quarrying": 58950715.42252382, "Food": 257429815.2829826, "Textiles": 132929621.59761468, "Wood and Paper": 68864445.33979435, "Petroleum": 254690605.40699717, "Metal Products": 104381863.5170702, "Electrica and Machinery": 119947017.47597526, "Transport Equipment": 122791830.98464236, "Other Manufacturing and Recycling": 46204398.73411038, "Electricity, Gas and Water": 62566645.66780196, "Construction": 261027075.62511644, "Maintenance and Repair": 21828374.581216495, "Wholesale": 91925835.11338961, "Retail": 78274925.66393983, "Hotels and Restaurants": 152796036.02150205, "Transport": 132435269.28385647, "Post and Telecommunications": 59805985.60698275, "Finance and Business": 365415656.54655594, "Public Administration": 76133943.99662259, "Education, Health and Other Services": 220529384.12383, "Private Households": 56712.34450462602, "Others": 8990556.375374667} },
                    { id: "SWE", name: "Sweden", expenditure: 901808258.2249619, continent: "Europe", sectors: {"Agriculture": 21307156.074651513, "Mining and Quarrying": 9050713.97828177, "Food": 62923146.486938305, "Textiles": 45136963.15047105, "Wood and Paper": 32465761.318723157, "Petroleum": 48906925.769920506, "Metal Products": 26942842.090440765, "Electrica and Machinery": 85823928.66995622, "Transport Equipment": 59935870.127602085, "Other Manufacturing and Recycling": 13700914.293508979, "Electricity, Gas and Water": 18696340.71975681, "Construction": 42384428.695083044, "Maintenance and Repair": 65242241.119699806, "Wholesale": 487659.67286588275, "Retail": 1055602.147216692, "Hotels and Restaurants": 16351124.681266135, "Transport": 63446750.36188476, "Post and Telecommunications": 21877821.57129171, "Finance and Business": 211756691.85126588, "Public Administration": 38797880.12922343, "Education, Health and Other Services": 136639722.68154177, "Private Households": 63626.150685324654, "Others": 2933137.6347186947} },
                    { id: "TWN", name: "Taiwan", expenditure: 830972021.6326674, continent: "Asia", sectors: {"Agriculture": 51236140.15344634, "Mining and Quarrying": 10945670.37453019, "Food": 114266517.69845766, "Textiles": 42016318.73999505, "Wood and Paper": 10499132.0255984, "Petroleum": 128074030.5979385, "Metal Products": 64959925.951076195, "Electrica and Machinery": 149668991.40073597, "Transport Equipment": 31991722.07389794, "Other Manufacturing and Recycling": 27414991.477981757, "Electricity, Gas and Water": 13507314.551034475, "Construction": 15238073.810309194, "Maintenance and Repair": 1137676.4664457203, "Wholesale": 16537790.998648925, "Retail": 27821943.887245383, "Hotels and Restaurants": 10943203.705159977, "Transport": 18260031.68948397, "Post and Telecommunications": 11390574.604710821, "Finance and Business": 84484890.48060896, "Public Administration": 19135678.82607259, "Education, Health and Other Services": 34081024.77312605, "Private Households": 1206886.324817903, "Others": 6448070.236059429} },
                    { id: "TUR", name: "Turkey", expenditure: 1425474937.7176661, continent: "Asia", sectors: {"Agriculture": 259476742.21625632, "Mining and Quarrying": 24067619.46119418, "Food": 188174785.028845, "Textiles": 77188139.46203424, "Wood and Paper": 17670253.374551885, "Petroleum": 110143044.43285038, "Metal Products": 78790146.0372399, "Electrica and Machinery": 118395238.61553954, "Transport Equipment": 44957603.016565, "Other Manufacturing and Recycling": 12820428.382479208, "Electricity, Gas and Water": 24332668.602047015, "Construction": 104847382.53769836, "Maintenance and Repair": 21369742.420549363, "Wholesale": 43627501.45402556, "Retail": 42189119.15464152, "Hotels and Restaurants": 29522271.786393616, "Transport": 140508949.81419778, "Post and Telecommunications": 13764970.476978045, "Finance and Business": 128467956.32729748, "Public Administration": 63272048.36078015, "Education, Health and Other Services": 89841785.72712886, "Private Households": 841762.5700007664, "Others": 1747952.4475799797} },
                    { id: "GBR", name: "United Kingdom", expenditure: 6208211465.869591, continent: "Europe", sectors: {"Agriculture": 86045248.32860194, "Mining and Quarrying": 76448596.07108632, "Food": 328141231.61244553, "Textiles": 160731452.76138905, "Wood and Paper": 113924291.92814985, "Petroleum": 320089884.9080024, "Metal Products": 150343910.48258227, "Electrica and Machinery": 342462539.3527962, "Transport Equipment": 120521876.69834399, "Other Manufacturing and Recycling": 70554944.59680773, "Electricity, Gas and Water": 155879694.35355106, "Construction": 370313708.94665205, "Maintenance and Repair": 52636586.88246502, "Wholesale": 250999770.22766286, "Retail": 163884637.27311903, "Hotels and Restaurants": 201095230.73128602, "Transport": 400918524.04512715, "Post and Telecommunications": 133167149.0927411, "Finance and Business": 1148618158.0220098, "Public Administration": 199477283.64964464, "Education, Health and Other Services": 691107457.7705349, "Private Households": 10214448.420946505, "Others": 14989870.269373275} },
                    { id: "USA", name: "United States", expenditure: 43717681794.67688, continent: "North America", sectors: {"Agriculture": 426191035.9052909, "Mining and Quarrying": 573197476.8603998, "Food": 4635990812.978713, "Textiles": 2646024987.616129, "Wood and Paper": 438540729.20361996, "Petroleum": 2299044089.1752143, "Metal Products": 837066306.86439, "Electrica and Machinery": 3039254033.0246253, "Transport Equipment": 1097554395.495789, "Other Manufacturing and Recycling": 507303416.7833227, "Electricity, Gas and Water": 545295951.4131235, "Construction": 1712003945.520051, "Maintenance and Repair": 48639143.48386435, "Wholesale": 1280316707.9135997, "Retail": 862292526.1005305, "Hotels and Restaurants": 1039057090.3835967, "Transport": 1698935327.8698792, "Post and Telecommunications": 1266690211.6620598, "Finance and Business": 8480477124.88644, "Public Administration": 2860937965.1616526, "Education, Health and Other Services": 4509887145.929508, "Private Households": 58783458.38022875, "Others": 52817509.65592929} },
                    { id: "VNM", name: "Vietnam", expenditure: 1116929259.5425057, continent: "Asia", sectors: {"Agriculture": 55889154.24660318, "Mining and Quarrying": 3281820.38604426, "Food": 253120324.13291186, "Textiles": 102570711.37057194, "Wood and Paper": 27138137.162098564, "Petroleum": 267579051.55040947, "Metal Products": 57681167.2459157, "Electrica and Machinery": 116668353.89362149, "Transport Equipment": 81522500.09000455, "Other Manufacturing and Recycling": 37799691.64766294, "Electricity, Gas and Water": 6876199.076657815, "Construction": 21319870.377132595, "Maintenance and Repair": 2206757.205298905, "Wholesale": 90383874.88430518, "Retail": 29893390.766296588, "Hotels and Restaurants": 7988099.333265257, "Transport": 11521860.266872562, "Post and Telecommunications": 2223239.7061950485, "Finance and Business": 15930819.20827694, "Public Administration": 13626780.9461596, "Education, Health and Other Services": 19668039.00883019, "Private Households": 61424.91181370874, "Others": 4067401.2286956613} },
                    { id: "ROW", name: "ROW", expenditure: 46648068150.66284, continent: "Other", sectors: {"Agriculture": 2731731272.7121797, "Mining and Quarrying": 915750434.8397274, "Food": 7880042553.315064, "Textiles": 3566309710.987709, "Wood and Paper": 1559051995.7924645, "Petroleum": 6558160451.503867, "Metal Products": 3328935174.0062966, "Electrica and Machinery": 6960232670.712459, "Transport Equipment": 2166185890.73297, "Other Manufacturing and Recycling": 1847941750.990692, "Electricity, Gas and Water": 809953199.517365, "Construction": 1637221695.481118, "Maintenance and Repair": 89815645.49340102, "Wholesale": 960056299.634328, "Retail": 1318281273.2153478, "Hotels and Restaurants": 735760697.489697, "Transport": 1512314601.891279, "Post and Telecommunications": 609487938.0808502, "Finance and Business": 4355444654.171493, "Public Administration": 1300481851.0228255, "Education, Health and Other Services": 1919519945.0155978, "Private Households": 25992465.506590974, "Others": 242589858.28152338} }
                ],
                links: []
            }
        };

        // Generate counterfactual data with sector-level variations
        graphData.counterfactual.nodes = graphData.baseline.nodes.map(country => ({
            ...country,
            expenditure: country.expenditure * (0.85 + Math.random() * 0.3),
            sectors: Object.fromEntries(
                Object.entries(country.sectors).map(([sector, value]) => [
                    sector, 
                    value * (0.85 + Math.random() * 0.3)
                ])
            )
        }));

        // Color mapping
        const continentColors = {
            'North America': '#ff7f0e',
            'South America': '#2ca02c', 
            'Europe': '#1f77b4',
            'Asia': '#d62728',
            'Africa': '#9467bd',
            'Oceania': '#8c564b',
            'Other': '#999999'
        };

        // Create 3D graph
        const Graph = ForceGraph3D()(document.getElementById('3d-graph'))
            .width(config.width)
            .height(config.height)
            .backgroundColor(config.backgroundColor)
            .showNavInfo(config.showNavInfo);

        // Current settings
        let currentScenario = 'baseline';
        let currentNodeSize = 25.0; // Default to node size 25
        let autoRotate = false;
        let selectedNode = null;
        
        // Initial settings for reset functionality
        const initialSettings = {
            nodeSize: 25.0, // Default to node size 25
            scenario: 'baseline'
        };

        // Initialize graph
        function initGraph() {
            updateGraph();
            setupControls();
            updateStats();
        }

        function updateGraph() {
            const data = getCurrentData();
            console.log('Graph data:', data); // Debug log
            
            Graph
                .graphData(data)
                .nodeLabel(node => {
                    if (node.type === 'country') {
                        return `${node.name} (${node.id})<br/>Total Expenditure: ${formatNumber(node.expenditure)}`;
                    } else {
                        return `${node.name}<br/>${node.countryName} (${node.country})<br/>Sector Expenditure: ${formatNumber(node.expenditure)}`;
                    }
                })
                                .nodeVal(node => getNodeSize(node))
                .nodeColor(node => getNodeColor(node))
                .nodeThreeObjectExtend(true)
                .nodeThreeObject(node => {
                    if (node.type === 'sector') {
                        // Create small cube for sector nodes
                        const size = getNodeSize(node);
                        const geometry = new THREE.BoxGeometry(size, size, size);
                        const material = new THREE.MeshBasicMaterial({ 
                            color: new THREE.Color(0x324878), // Dark blue
                            transparent: true,
                            opacity: 0.8
                        });
                        return new THREE.Mesh(geometry, material);
                    }
                    return false; // Use default sphere for country nodes
                })
                .onNodeClick(onNodeClick)
                .onNodeHover(onNodeHover);
            
            // Add clustering forces to group sectors tightly within countries
            setupClusteringForces();
        }

        function getCurrentData() {
            const data = graphData[currentScenario];
            if (!data || !data.nodes) {
                console.log('No data found for scenario:', currentScenario);
                return { nodes: [], links: [] };
            }
            
            const allNodes = [];
            
            // Add country nodes and their sector nodes
            data.nodes.forEach(country => {
                // Add country node (mark as country type)
                const countryNode = {
                    ...country,
                    type: 'country'
                };
                
                if (currentScenario === 'comparison') {
                    const cfCountry = graphData.counterfactual.nodes.find(c => c.id === country.id);
                    const baseCountry = graphData.baseline.nodes.find(c => c.id === country.id);
                    if (cfCountry && baseCountry) {
                        const pctChange = ((cfCountry.expenditure - baseCountry.expenditure) / baseCountry.expenditure) * 100;
                        countryNode.expenditure = cfCountry.expenditure;
                        countryNode.baselineExpenditure = baseCountry.expenditure;
                        countryNode.change = cfCountry.expenditure - baseCountry.expenditure;
                        countryNode.pctChange = pctChange;
                    }
                }
                
                allNodes.push(countryNode);
                
                // Add sector nodes for this country
                if (country.sectors) {
                    Object.entries(country.sectors).forEach(([sectorName, sectorExpenditure]) => {
                        if (sectorExpenditure > 0) { // Only add sectors with positive expenditure
                            const sectorNode = {
                                id: `${country.id}_${sectorName}`,
                                name: sectorName,
                                country: country.id,
                                countryName: country.name,
                                expenditure: sectorExpenditure,
                                continent: country.continent,
                                type: 'sector'
                            };
                            
                            if (currentScenario === 'comparison') {
                                const cfCountry = graphData.counterfactual.nodes.find(c => c.id === country.id);
                                const baseCountry = graphData.baseline.nodes.find(c => c.id === country.id);
                                if (cfCountry && baseCountry && cfCountry.sectors && baseCountry.sectors) {
                                    const cfSector = cfCountry.sectors[sectorName] || 0;
                                    const baseSector = baseCountry.sectors[sectorName] || 0;
                                    const pctChange = baseSector !== 0 ? ((cfSector - baseSector) / baseSector) * 100 : 0;
                                    sectorNode.expenditure = cfSector;
                                    sectorNode.baselineExpenditure = baseSector;
                                    sectorNode.change = cfSector - baseSector;
                                    sectorNode.pctChange = pctChange;
                                }
                            }
                            
                            allNodes.push(sectorNode);
                        }
                    });
                }
            });
            
            console.log('Generated nodes:', allNodes.length);
            return { nodes: allNodes, links: [] };
        }

        function getNodeSize(node) {
            let baseSize;
            if (node.type === 'country') {
                // Country nodes are very large containers for clear visualization
                baseSize = Math.sqrt(node.expenditure) / VISUALIZATION_CONFIG.COUNTRY_SIZE_DIVISOR;
            } else {
                // Sector cubes are small but visible
                baseSize = Math.sqrt(node.expenditure) / VISUALIZATION_CONFIG.SECTOR_SIZE_DIVISOR;
            }
            return baseSize * Math.pow(currentNodeSize, 1.5); // More dramatic scaling with power function
        }

        function getNodeColor(node) {
            if (currentScenario === 'comparison' && node.pctChange !== undefined) {
                const intensity = Math.min(Math.abs(node.pctChange) / 20, 1);
                if (node.pctChange > 0) {
                    // Red for increases
                    return `rgba(255, ${Math.round(255 * (1 - intensity))}, ${Math.round(255 * (1 - intensity))}, 0.7)`;
                } else if (node.pctChange < 0) {
                    // Green for decreases  
                    return `rgba(${Math.round(255 * (1 - intensity))}, 255, ${Math.round(255 * (1 - intensity))}, 0.7)`;
                } else {
                    return 'rgba(128, 128, 128, 0.7)';
                }
            } else {
                if (node.type === 'country') {
                    // Country nodes are light blue with high transparency (wrapper/container)
                    return 'rgba(100, 150, 200, 0.2)';
                } else {
                    // Sector nodes are dark blue (solid content)
                    return 'rgba(50, 80, 120, 0.9)';
                }
            }
        }

        function onNodeClick(node) {
            selectedNode = node;
            showNodeInfo(node);
            updateStats();
            
            // Focus on node
            const distance = 200;
            const distRatio = 1 + distance/Math.hypot(node.x, node.y, node.z);
            Graph.cameraPosition(
                { x: node.x * distRatio, y: node.y * distRatio, z: node.z * distRatio },
                node,
                3000
            );
        }

        function onNodeHover(node) {
            document.body.style.cursor = node ? 'pointer' : null;
        }

        function showNodeInfo(node) {
            const nodeInfo = document.getElementById('nodeInfo');
            const nodeDetails = document.getElementById('nodeDetails');
            
            let content = '';
            
            if (node.type === 'country') {
                content = `<strong>${node.name} (${node.id})</strong><br/>`;
                content += `<strong>Type:</strong> Country<br/>`;
                content += `<strong>Continent:</strong> ${node.continent}<br/>`;
            } else {
                content = `<strong>${node.name}</strong><br/>`;
                content += `<strong>Type:</strong> Sector<br/>`;
                content += `<strong>Country:</strong> ${node.countryName} (${node.country})<br/>`;
                content += `<strong>Continent:</strong> ${node.continent}<br/>`;
            }
            
            if (currentScenario === 'comparison') {
                content += `<strong>Baseline:</strong> ${formatNumber(node.baselineExpenditure)}<br/>`;
                content += `<strong>Counterfactual:</strong> ${formatNumber(node.expenditure)}<br/>`;
                content += `<strong>Change:</strong> <span style="color: ${node.pctChange >= 0 ? '#ff4444' : '#44ff44'}">${node.pctChange > 0 ? '+' : ''}${node.pctChange.toFixed(2)}%</span>`;
            } else {
                const label = node.type === 'country' ? 'Total Expenditure' : 'Sector Expenditure';
                content += `<strong>${label}:</strong> ${formatNumber(node.expenditure)}`;
            }
            
            nodeDetails.innerHTML = content;
            nodeInfo.style.display = 'block';
        }

        function setupControls() {
            // Scenario selector
            document.getElementById('scenarioSelect').addEventListener('change', (e) => {
                currentScenario = e.target.value;
                updateGraph();
                updateStats();
                hideNodeInfo();
            });

            // Node size slider
            const nodeSizeSlider = document.getElementById('nodeSize');
            nodeSizeSlider.addEventListener('input', (e) => {
                currentNodeSize = parseFloat(e.target.value);
                document.getElementById('nodeSizeValue').textContent = currentNodeSize.toFixed(1);
                // Update node sizes directly without regenerating the graph
                Graph.nodeVal(node => getNodeSize(node));
            });



            // Control buttons
            document.getElementById('pauseBtn').addEventListener('click', () => {
                const btn = document.getElementById('pauseBtn');
                if (Graph.pauseAnimation()) {
                    Graph.resumeAnimation();
                    btn.textContent = '‚è∏Ô∏è Pause';
                } else {
                    Graph.pauseAnimation();
                    btn.textContent = '‚ñ∂Ô∏è Resume';
                }
            });

            document.getElementById('resetBtn').addEventListener('click', () => {
                // Reset all settings to initial values
                currentScenario = initialSettings.scenario;
                currentNodeSize = initialSettings.nodeSize;
                
                // Reset UI controls
                document.getElementById('scenarioSelect').value = initialSettings.scenario;
                document.getElementById('nodeSize').value = initialSettings.nodeSize;
                document.getElementById('nodeSizeValue').textContent = initialSettings.nodeSize.toFixed(1);
                
                // Reset auto rotate if it's on
                if (autoRotate) {
                    autoRotate = false;
                    document.getElementById('autoRotateBtn').textContent = 'üîÑ Auto Rotate';
                }
                
                // Update graph and reset camera
                updateGraph();
                updateStats();
                hideNodeInfo();
                Graph.d3ReheatSimulation();
                Graph.cameraPosition({ x: 0, y: 0, z: 300 }, { x: 0, y: 0, z: 0 }, 2000);
            });

            document.getElementById('autoRotateBtn').addEventListener('click', () => {
                autoRotate = !autoRotate;
                const btn = document.getElementById('autoRotateBtn');
                btn.textContent = autoRotate ? '‚èπÔ∏è Stop Rotate' : 'üîÑ Auto Rotate';
                
                if (autoRotate) {
                    startAutoRotate();
                }
            });

            document.getElementById('centerBtn').addEventListener('click', () => {
                Graph.cameraPosition({ x: 0, y: 0, z: 300 }, { x: 0, y: 0, z: 0 }, 2000);
            });

            // Keyboard controls
            document.addEventListener('keydown', (e) => {
                const camera = Graph.camera();
                const step = 20;
                
                switch(e.code) {
                    case 'KeyW':
                        camera.position.z -= step;
                        break;
                    case 'KeyS':
                        camera.position.z += step;
                        break;
                    case 'KeyA':
                        camera.position.x -= step;
                        break;
                    case 'KeyD':
                        camera.position.x += step;
                        break;
                    case 'Space':
                        Graph.pauseAnimation();
                        e.preventDefault();
                        break;
                }
            });

            // Hide node info when clicking elsewhere
            document.addEventListener('click', (e) => {
                if (!e.target.closest('.node-info') && !e.target.closest('#3d-graph')) {
                    hideNodeInfo();
                }
            });
                }

        function setupClusteringForces() {
            // Strong clustering force to pull sector cubes toward their country center
            Graph.d3Force('cluster', () => {
                const nodes = Graph.graphData().nodes;
                
                nodes.forEach(node => {
                    if (node.type === 'sector') {
                        // Find the corresponding country node
                        const countryNode = nodes.find(n => n.type === 'country' && n.id === node.country);
                        if (countryNode && countryNode.x !== undefined) {
                            // Very strong attraction to country center
                            const dx = countryNode.x - (node.x || 0);
                            const dy = countryNode.y - (node.y || 0);
                            const dz = countryNode.z - (node.z || 0);
                            
                            // Apply very strong clustering force
                            const force = 0.15;
                            node.vx = (node.vx || 0) + dx * force;
                            node.vy = (node.vy || 0) + dy * force;
                            node.vz = (node.vz || 0) + dz * force;
                        }
                    }
                });
            });
            
            // Reduce charge force to bring countries closer together
            Graph.d3Force('charge').strength(VISUALIZATION_CONFIG.OVERALL_REPULSION_FORCE);
            
            // Very tight packing force for sector cubes within same country
            Graph.d3Force('tightPack', () => {
                const nodes = Graph.graphData().nodes;
                const sectorNodes = nodes.filter(n => n.type === 'sector');
                
                for (let i = 0; i < sectorNodes.length; i++) {
                    const nodeA = sectorNodes[i];
                    
                    for (let j = i + 1; j < sectorNodes.length; j++) {
                        const nodeB = sectorNodes[j];
                        
                        if (nodeA.country === nodeB.country) {
                            // Same country - pack cubes very tightly
                            const dx = (nodeB.x || 0) - (nodeA.x || 0);
                            const dy = (nodeB.y || 0) - (nodeA.y || 0);
                            const dz = (nodeB.z || 0) - (nodeA.z || 0);
                            const distance = Math.sqrt(dx * dx + dy * dy + dz * dz);
                            
                            const targetDistance = VISUALIZATION_CONFIG.SECTOR_PACK_DISTANCE; // Very tight cube packing
                            if (distance > targetDistance) {
                                const force = (distance - targetDistance) / distance * 0.02;
                                const fx = dx * force;
                                const fy = dy * force;
                                const fz = dz * force;
                                
                                nodeA.vx = (nodeA.vx || 0) + fx;
                                nodeA.vy = (nodeA.vy || 0) + fy;
                                nodeA.vz = (nodeA.vz || 0) + fz;
                                nodeB.vx = (nodeB.vx || 0) - fx;
                                nodeB.vy = (nodeB.vy || 0) - fy;
                                nodeB.vz = (nodeB.vz || 0) - fz;
                            }
                        } else {
                            // Different countries - reduce separation to bring countries closer
                            const dx = (nodeB.x || 0) - (nodeA.x || 0);
                            const dy = (nodeB.y || 0) - (nodeA.y || 0);
                            const dz = (nodeB.z || 0) - (nodeA.z || 0);
                            const distance = Math.sqrt(dx * dx + dy * dy + dz * dz);
                            
                            const minDistance = VISUALIZATION_CONFIG.COUNTRY_SEPARATION_DISTANCE; // Minimum gap between countries
                            if (distance < minDistance) {
                                const force = (minDistance - distance) / distance * 0.01;
                                const fx = dx * force;
                                const fy = dy * force;
                                const fz = dz * force;
                                
                                nodeA.vx = (nodeA.vx || 0) - fx;
                                nodeA.vy = (nodeA.vy || 0) - fy;
                                nodeA.vz = (nodeA.vz || 0) - fz;
                                nodeB.vx = (nodeB.vx || 0) + fx;
                                nodeB.vy = (nodeB.vy || 0) + fy;
                                nodeB.vz = (nodeB.vz || 0) + fz;
                            }
                        }
                    }
                }
            });
        }

        function startAutoRotate() {
            function rotate() {
                if (autoRotate) {
                    const camera = Graph.camera();
                    const radius = Math.sqrt(camera.position.x ** 2 + camera.position.z ** 2);
                    const angle = Math.atan2(camera.position.z, camera.position.x) + 0.01;
                    
                    Graph.cameraPosition({
                        x: radius * Math.cos(angle),
                        y: camera.position.y,
                        z: radius * Math.sin(angle)
                    });
                    
                    requestAnimationFrame(rotate);
                }
            }
            rotate();
        }

        function updateStats() {
            const data = getCurrentData();
            const countryNodes = data.nodes.filter(node => node.type === 'country');
            const sectorNodes = data.nodes.filter(node => node.type === 'sector');
            const totalExpenditure = countryNodes.reduce((sum, node) => sum + node.expenditure, 0);
            
            document.getElementById('countryCount').textContent = `${countryNodes.length} countries, ${sectorNodes.length} sectors`;
            document.getElementById('totalExpenditure').textContent = formatNumber(totalExpenditure);
            document.getElementById('selectedNode').textContent = selectedNode ? 
                (selectedNode.type === 'country' ? selectedNode.name : `${selectedNode.name} (${selectedNode.country})`) : 'None';
        }

        function hideNodeInfo() {
            document.getElementById('nodeInfo').style.display = 'none';
            selectedNode = null;
            updateStats();
        }

        function formatNumber(num) {
            if (num >= 1e9) return '$' + (num / 1e9).toFixed(1) + 'B';
            if (num >= 1e6) return '$' + (num / 1e6).toFixed(1) + 'M';
            if (num >= 1e3) return '$' + (num / 1e3).toFixed(1) + 'K';
            return '$' + num.toFixed(0);
        }

        // Handle window resize
        window.addEventListener('resize', () => {
            Graph.width(window.innerWidth).height(window.innerHeight);
        });

        // Function to load real data
        window.loadTradeData3D = function(data) {
            // Convert 2D data format to 3D graph format
            graphData.baseline = {
                nodes: data.baseline.countries.map(country => ({
                    id: country.id,
                    name: country.name,
                    expenditure: country.expenditure,
                    continent: country.continent,
                    sectors: country.sectors
                })),
                links: []
            };
            
            if (data.counterfactual) {
                graphData.counterfactual = {
                    nodes: data.counterfactual.countries.map(country => ({
                        id: country.id,
                        name: country.name,
                        expenditure: country.expenditure,
                        continent: country.continent,
                        sectors: country.sectors
                    })),
                    links: []
                };
            }
            
            updateGraph();
            updateStats();
        };

        // Initialize
        initGraph();
    </script>
</body>
</html> 